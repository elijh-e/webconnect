"use strict";(self.webpackChunkwebconnect=self.webpackChunkwebconnect||[]).push([[999],{7561:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(7294),r=n(1120),o=n(8365),l=n(2822),i=n(998),s=n(5757),c=n(6869);const m=(0,r.Z)({preloader:{display:"flex"},avatar:{}}),d=()=>{const e=m();return a.createElement("div",{className:e.loaderUser},[1,1].map(((t,n)=>a.createElement(l.Z,{key:n},a.createElement(i.Z,null,a.createElement(c.Z,null,a.createElement(o.Z,{className:e.avatar,variant:"circle",width:50,height:50})),a.createElement(s.Z,null,a.createElement(o.Z,{variant:"text"})))))))}},7134:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(7294),r=n(1120),o=n(2387);const l=(0,r.Z)({chatActions:{borderRadius:"5px",zIndex:25e4,display:"flex",flexDirection:"column",background:"#fff !important","& > div":{display:"flex"},"& div:first-child":{},"& > div:last-of-type":{flexDirection:"column","& > button":{padding:"12px 0 12px 15px",borderRadius:0,"& .MuiIconButton-label":{justifyContent:"flex-start"},"& > span > span.MuiTypography-root":{padding:"0 25px 0 15px",color:"#000"}}}}});function i({children:e,open:t,anchorReference:n,anchorPosition:r,transformOrigin:i,anchorEl:s,onClose:c,anchorOrigin:m}){const d=l();return void 0===r?a.createElement(o.ZP,{open:t,anchorEl:s,onClose:c,elevation:2,anchorOrigin:m||{vertical:"center",horizontal:"center"},transformOrigin:i||{vertical:"center",horizontal:"center"}},a.createElement("div",{className:d.chatActions},e)):a.createElement(o.ZP,{open:t,elevation:2,anchorReference:"anchorPosition",anchorPosition:r,onClose:c,anchorOrigin:m||{vertical:"center",horizontal:"center"},transformOrigin:i||{vertical:"center",horizontal:"center"}},a.createElement("div",{className:d.chatActions},e))}i.propTypes={};const s=i},2835:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(7294),r=n(1120),o=n(5258),l=n(8358),i=n(515);const s=(0,r.Z)((e=>({root:{flexGrow:1,height:"3.7rem",padding:"10px 0",height:"4.5rem",background:i.Z.white,top:0,boxShadow:"-3px 1px 3px 0px #e5e5e5","& .MuiToolbar-root":{padding:0,height:"100%"}},menuButton:{marginRight:e.spacing(2)}}))),c=({children:e,styles:t})=>{const n=s();return a.createElement(o.Z,{position:"sticky",className:n.root,style:t},a.createElement(l.Z,{variant:"dense"},e))}},2999:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Lt});var a=n(7294),r=n(9704),o=n(6974),l=n(1120),i=n(6367),s=n(3084),c=n(2788);const m=c.ZP.div`
	display: flex;
	justify-content: center;
	align-items: center;
	margin: 50px;
	flex-direction: column;

	em {
		color: #555674;
		margin-top: 10px;
	}
`;function d(){return a.createElement(m,null,a.createElement(s.Preloader,{use:s.ThreeDots,size:37,strokeWidth:12,strokeColor:"#7e7e7e",duration:800}),a.createElement("em",null,"Setting up your space..."))}var u=n(6614),p=n(3961),h=n(5403),f=n(6257),g=n(9700),E=n(9585),y=n(5076),v=n(2005),Z=n(6140),b=n(515),w=n(2318),x=n(7812),k=n(4379),C=n(7561),S=n(5953),I=n(6869),N=n(5757),P=n(998),T=n(2835),M=n(6426),U=n(1867),L=n(3268),D=n(4199);function A(e){const{id:t}=JSON.parse(localStorage.getItem("user")),n=new Headers;n.append("Content-Type","application/json"),n.append("Authorization",`Bearer ${t}`),fetch("/auth/refresh",{method:"GET",headers:n}).then((e=>e.json())).then((t=>{(0,D.$s)(t.jwt),e()}))}async function z(e,t=(()=>{})){const{method:n,url:a}=e,r=new Headers;if(r.append("Content-Type","application/json"),"GET"===n.toUpperCase())try{let o=await fetch(a,{method:n,headers:r});return void(o.ok?t(await o.json()):401===o.status&&"Unauthorized"===o.statusText&&A((()=>z(e,t))))}catch(e){}else try{let o=(null==e?void 0:e.body)||{},l=await fetch(a,{method:n,headers:r,body:JSON.stringify(o)});l.ok?t(await l.json()):401===l.status&&"Unauthorized"===l.statusText&&A((()=>z(e,t)))}catch(e){}}const _=({username:e},t)=>{z({method:"GET",url:`/chat/fetchMessages/${e}`},(e=>t(e)))},O=(0,l.Z)({backBtn:{fontSize:"1.2rem !important"},searchbar:{marginRight:"5px"},arrow:{textAlign:"right",cursor:"pointer"},listItem:{"&.MuiListItem-root.Mui-selected":{backgroundColor:"#efefef"},"$:hover":{backgroundColor:"#e3e3e34d"},position:"relative","& .MuiAvatar-root":{width:45,height:45},"& .MuiListItemText-root":{marginLeft:".3rem"}}}),F=({user:e,style:t,secondaryItems:n,groupSelected:o})=>{const{id:l,username:i}=(0,r.v9)((e=>e.account.account)),s=O(),c=(0,r.I0)(),m=(0,r.v9)((e=>e.other.currentSelectedUser)),d=(0,r.v9)((e=>e.other.fetched)),p=(0,r.v9)((e=>e.recentChats.recentChats)).find((t=>t.username===e.username)),[h,g]=a.useState(null),[Z,b]=a.useState("");a.useEffect((()=>{e.online?b(""):b("last seen "+(0,v.xq)(e.lastSeen))}),[e.online]);const x=()=>{window.innerWidth<660&&c((0,E.T6)({parent:"leftPane",component:!1}))};return a.createElement(P.Z,{button:!0,className:s.listItem,selected:e.username===m.username,style:{display:!0===e.visible?"flex":"none"},onClick:()=>{m.username!==e.username&&(void 0!==p&&p.unread>0&&(c((0,u.JZ)(e.username)),(0,L.Z)("chatIsRead",{sender:e.username,receiver:i})),void 0!==d.find((t=>t===e.username))?(c((0,S.r0)(e)),x(),o&&c((0,y.lr)({}))):_({username:e.username},(t=>{c((0,f.yp)(t)),c((0,S.m1)(e.username)),c((0,S.r0)(e)),o&&c((0,y.lr)({})),x()})))}},a.createElement(I.Z,null,a.createElement(M.Z,{username:e.username,badge:!!e.online})),a.createElement(N.Z,{primary:a.createElement(w.Z,{component:"h6",style:{fontFamily:"Roboto"}}," ",e.username),secondary:e.lastSeen&&Z}))},G=({className:e})=>{const{useEffect:t}=a,n=O(),o=(0,r.I0)(),l=(0,r.v9)((e=>e.activeUsers.activeUsers)),i=(0,r.v9)((e=>e.activeUsers.showActiveUsersLoader)),s=(0,r.v9)((e=>e.activeUsers.input)),c=(0,r.v9)((e=>e.groups.selectedGroup));return a.createElement("section",{className:[n.activeUsers,e].join(" ")},a.createElement(T.Z,null,a.createElement(x.Z,{onClick:()=>{o((0,E.T6)({parent:"stack",component:"recentChats"}))}},a.createElement(k.Z,null)),a.createElement(U.Z,{input:s,classNames:[n.searchbar],placeholder:"Search for all users",onChange:e=>{var t;t=e,o((0,p.tn)(t))}})),a.createElement("div",{className:n.userslist},i?a.createElement(C.Z,null):l.map((e=>a.createElement(F,{user:e,key:e.username,groupSelected:(0,v.hu)(c)})))))};var W=n(4593),j=n(5639),B=n(4170),R=n(6856),X=n(9525),Y=n(7212),H=n(6083),q=n(282),$=n(9302),J=n(4077),K=n(4710),V=n(3637),Q=n(650),ee=n(87),te=n(5891),ne=n(8513),ae=n(637),re=n(5984),oe=n(8442),le=n(3817),ie=n(9805),se=n(7134),ce=n(3247);const me=async e=>{z({url:"/chat/recentChats",method:"GET"},(t=>e(t)))},de=(0,l.Z)({listItem:{position:"relative",padding:12,"&.MuiListItem-root.Mui-selected":{backgroundColor:"#efefef"},"&:hover":{backgroundColor:"#e3e3e34d"},"& .MuiAvatar-root":{width:45,height:45},"& .MuiMenu-list":{padding:"2px 0"},"& .MuiListItemText-root":{marginLeft:".3rem","& .MuiListItemText-secondary":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",paddingInlineEnd:10,marginTop:2}}},chatMisc:{display:"flex",alignItems:"flex-end",flexDirection:"column",justifyContent:"center",fontSize:".8rem",whiteSpace:"nowrap"},lastSent:{marginBottom:6,textAlign:"right",color:"#53555e"},chatProps:{alignItems:"center",display:"flex",justifyContent:"center","& > svg":{fontSize:"1.3rem",color:"#a2aab9"}},unread:{minWidth:17,minHeight:17,background:"#6495ed",borderRadius:"100%",color:"#fff",marginLeft:6,textAlign:"center"},typingStatus:{color:"#6495ed"},lastChat:{color:"initial",fontSize:".9rem","& span":{color:" #9d9d9d"}},isRead:{color:"#6495ed"},chatRead:{"& svg":{fontSize:".8rem",position:"relative",top:2}}}),ue=function({isStarred:e,username:t,unread:n,visible:o,lastChat:l,chatType:i,isOnline:s,typing:c,pId:m,groupIsSelected:d,isFetched:p,isCurrentSelectedUser:h}){const{username:g,id:Z}=(0,r.v9)((e=>e.account.account)),b=de(),k=(0,r.I0)(),[C,T]=a.useState(!1),[U,D]=a.useState(null),[A,O]=a.useState("");a.useEffect((()=>{(0,v.hu)(l)&&O((0,v.Co)(l.chatId,l.timestamp))}),[l]);const F=()=>{d&&k((0,y.lr)({})),k((0,S.r0)({username:t})),window.innerWidth<660&&k((0,E.T6)({parent:"leftPane",component:!1}))},G=e=>{T(!1),D(null)};return a.createElement(a.Fragment,null,a.createElement(P.Z,{button:!0,className:b.listItem,selected:h||C,onClick:e=>{e.preventDefault(),h||((0,v.hu)(n)&&(k((0,u.JZ)(t)),(0,L.Z)("chatIsRead",{sender:t,receiver:g})),p?F():_({username:t},(e=>{k((0,f.yp)(e)),k((0,S.m1)(t)),F()})))},onContextMenu:e=>(e.preventDefault(),T(!0),D(e.currentTarget),!1),style:{display:o?"flex":"none"}},a.createElement(I.Z,null,a.createElement(M.Z,{username:t,badge:s})),a.createElement(N.Z,{primary:a.createElement(w.Z,{component:"h6"}," ",t),secondary:c?a.createElement(ce.Z,null):a.createElement("span",{className:b.lastChat},l.sender===g&&a.createElement("span",{className:b.chatRead},l.read?a.createElement(ie.Z,{className:b.isRead}):a.createElement(ae.Z,null)),a.createElement("span",null," ",l.message," "))}),a.createElement("div",{className:b.chatMisc},a.createElement("span",{className:b.lastSent,style:{color:(0,v.hu)(n)?"#6495ed":"initial"}},A),a.createElement("span",{className:b.chatProps},e.value&&a.createElement(re.Z,null),(0,v.hu)(n)&&a.createElement("span",{className:b.unread}," ",n.length," ")))),a.createElement(se.Z,{open:C,anchorEl:U,onClose:G,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"}},a.createElement("div",null,a.createElement(x.Z,{onClick:()=>{(()=>{const n={value:!e.value,date:Date.now()};(async e=>{z({url:"/chat/starConversation",method:"PUT",body:e})})({username:t,starred:n}),k((0,u.hP)({friendsName:t,isStarred:n}))})(),G()}},e.value?a.createElement(re.Z,{style:{color:"#6495ed"}}):a.createElement(le.Z,{style:{color:"#6495ed"}}),a.createElement(w.Z,{component:"span"}," ",(e.value?"Unstar":"Star")+" conversation")),a.createElement(x.Z,{onClick:()=>{k((0,u.Wk)({username:t})),G()}},a.createElement(oe.Z,{style:{color:"#ff6a6a"}}),a.createElement(w.Z,{component:"span"}," Clear conversation ")))))};var pe=n(2792),he=n(3901);const fe=(e,t)=>{z({url:`/chat/fetchGroupInfo/${e}`,method:"GET"},(e=>t(e)))},ge=(0,l.Z)({listItem:{position:"relative",padding:12,"&.MuiListItem-root.Mui-selected":{backgroundColor:"#efefef"},"&:hover":{backgroundColor:"#e3e3e34d"},"& .MuiAvatar-root":{width:45,height:45},"& .MuiMenu-list":{padding:"2px 0"},"& .MuiListItemText-root":{"& > h6, & > p":{marginLeft:".3rem",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",paddingInlineEnd:10,marginTop:2}}},chatMisc:{display:"flex",alignItems:"flex-end",flexDirection:"column",justifyContent:"center",fontSize:".8rem",whiteSpace:"nowrap"},lastSent:{marginBottom:6,textAlign:"right",color:"#53555e"},chatProps:{alignItems:"center",display:"flex",justifyContent:"center","& > svg":{fontSize:"1.3rem",color:"#a2aab9"}},unread:{minWidth:17,minHeight:17,background:"#6495ed",borderRadius:"100%",color:"#fff",marginLeft:6,textAlign:"center"},lastGroupChat:{"& > span:first-child":{color:"#d99a5a",fontWeight:"bold"},"& > span:last-of-type":{color:"#9d9d9d"}},textPrimary:{color:"#9d9d9d"}}),Ee=function({_id:e,name:t,isStarred:n,typing:o,visible:l,unread:i,lastChat:s,isNull:c,userIsSelected:m,isCurrentSelectedGroup:d,isFetched:p}){const{id:h,username:f}=(0,r.v9)((e=>e.account.account)),g=ge(),Z=(0,r.I0)(),[b,k]=a.useState(!1),[C,T]=a.useState(null),[M,U]=a.useState(),[L,D]=a.useState(""),[A,_]=a.useState("");a.useEffect((()=>{(0,v.hu)(s)&&D((0,v.Co)(s.chatId,s.timestamp))}),[s]);const O=e=>{k(!1),T(null)},F=()=>{Z((0,y.lr)({_id:e})),m&&Z((0,S.r0)({})),window.innerWidth<660&&Z((0,E.T6)({parent:"leftPane",component:!1}))};return a.createElement(a.Fragment,null,a.createElement(P.Z,{button:!0,className:g.listItem,onClick:()=>{c||d||((0,v.hu)(i)&&(z({url:"/chat/clearGroupUnread",method:"PUT",body:{groupId:e}},(e=>(void 0)(e))),Z((0,u.l9)({_id:e,field:{unread:[]}}))),p?F():(({groupId:e},t)=>{z({url:`/chat/fetchGroupChats/${e}`,method:"GET"},(e=>t(e)))})({groupId:e},(t=>{Z((0,y.ED)(t)),Z((0,y.K2)(e)),F()})))},selected:d||b,onContextMenu:e=>(e.preventDefault(),k(!0),T(e.currentTarget),!1),style:{display:l?"flex":"none"}},a.createElement(I.Z,null,a.createElement(he.Z,null,a.createElement(pe.Z,null))),a.createElement(N.Z,{primary:a.createElement(w.Z,{component:"h6"}," ",t),secondary:a.createElement("span",null,o.some((e=>e.typing))&&a.createElement(ce.Z,null,o.map((e=>e.username)).join(", ")),(0,v.hu)(s)&&!o.some((e=>e.typing))&&a.createElement("span",{className:[g.lastGroupChat].join(" ")},s.type&&"alert"===s.type?s.message.split(" ").map((e=>e.replaceAll(f,"You"))).join(" "):a.createElement(a.Fragment,null,a.createElement("span",null,s.sender.replaceAll(f,"You"),":"),a.createElement("span",null," ",s.message," "))))}),a.createElement("div",{className:g.chatMisc},a.createElement("span",{className:g.lastSent,style:{color:(0,v.hu)(i)?"#6495ed":"initial"}},L),a.createElement("span",{className:g.chatProps},n.value&&a.createElement(re.Z,null),(0,v.hu)(i)&&a.createElement("span",{className:g.unread}," ",i.length," ")))),a.createElement(se.Z,{open:b,anchorEl:C,onClose:O,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"}},a.createElement("div",null,a.createElement(x.Z,{onClick:()=>{(()=>{const t={value:!n.value,date:Date.now()};(({body:e,groupId:t},n)=>{z({url:`chat/starGroup/${t}`,method:"PUT",body:e})})({groupId:e,body:t}),Z((0,u.eb)({_id:e,starredObj:t}))})(),O()}},n.value?a.createElement(re.Z,{style:{color:"#6495ed"}}):a.createElement(le.Z,{style:{color:"#6495ed"}}),a.createElement(w.Z,{component:"span"}," ",(n.value?"Unstar":"Star")+" group")),a.createElement(x.Z,{onClick:()=>{Z((0,u.iY)(e)),O()}},a.createElement(oe.Z,{style:{color:"#ff6a6a"}}),a.createElement(w.Z,{component:"span"}," Exit group ")))))};function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ye.apply(this,arguments)}const ve=(0,l.Z)({add:{fontSize:"2.9rem !important"},menu:{"& div":{top:"75px !important"},"& .MuiMenuItem-root":{paddingLeft:"10px"},"& svg":{marginRight:11,color:"#57565c",fontSize:"1.5rem"},"& .MuiListItemIcon-root":{minWidth:40}},speedDial:{alignItems:"flex-end",position:"sticky",bottom:"1rem",right:"1rem","& .MuiFab-primary":{background:"cornflowerblue",color:"#fff"},"& .MuiSpeedDialAction-staticTooltipLabel":{color:"#fff",background:"#739be3",whiteSpace:"nowrap"},"& .MuiSpeedDialAction-fab":{backgroundColor:"#739be3",color:"#fff"}}}),Ze=({className:e})=>{(0,r.v9)((e=>e.components.stack.recentChats));const t=(0,r.v9)((e=>e.recentChats.chatToBeCleared)),n=(0,r.v9)((e=>e.recentChats.groupToBeDeleted)),o=(0,r.v9)((e=>e.recentChats.input)),{id:l,username:i}=(0,r.v9)((e=>e.account.account)),{useEffect:s,useState:c}=a,m=ve(),d=(0,r.I0)(),[p,h]=c(null),g=Boolean(p),Z=()=>{h(null)},b=(0,r.v9)((e=>e.other.currentSelectedUser)),k=(0,r.v9)((e=>e.groups.selectedGroup)),I=(0,r.v9)((e=>e.recentChats.recentChats)),N=(0,r.v9)((e=>e.recentChats.showRecentUsersLoader)),P=(0,r.v9)((e=>e.other.fetched)),M=(0,r.v9)((e=>e.socketActivity.onlineUsers)),D=(0,r.v9)((e=>e.groups.fetchedGroups)),[A,_]=c(!1),[O,F]=c(!1),G=e=>{d((0,E.T6)(e))},ae=()=>{(0,v.hu)(t)&&d((0,u.Wk)({})),(0,v.hu)(n)&&d((0,u.iY)({}))},re=()=>{_(!A)};return a.createElement("section",{className:[m.recentChats,e].join(" "),onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1)},a.createElement(T.Z,{styles:{}},a.createElement(x.Z,{onClick:()=>{Z(),G({parent:"stack",component:"settings"})}},a.createElement(te.Z,{style:{color:"#6e84ab"}})),a.createElement(U.Z,{input:o,placeholder:"Search for users and groups",onChange:e=>{var t;t=e,d((0,u.gI)(t))}}),a.createElement(x.Z,{onClick:e=>{h(e.target)},style:{background:g&&"#0000000a"}},a.createElement(ne.Z,null)),a.createElement(W.Z,{open:g,anchorOrigin:{horizontal:"right",vertical:"top"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:Z,anchorEl:p,className:m.menu},a.createElement(j.Z,{onClick:()=>{Z(),G({parent:"stack",component:"activeUsers"})}},a.createElement(Q.Z,null),a.createElement(w.Z,{variant:"inherit"}," Network ")))),a.createElement("div",{className:m.userslist},N?a.createElement(C.Z,null):I.length>0&&I.map(((e,r)=>{if(e.chatType&&"group"===e.chatType){const t=()=>!!D.some((t=>t===e._id)),o=()=>k._id===e._id||!(!(0,v.hu)(n)||n._id!==e._id);return a.createElement(Ee,ye({},e,{key:r,userIsSelected:!!(0,v.hu)(b),isFetched:t(),isCurrentSelectedGroup:o()}))}{let n=()=>!(!(0,v.hu)(b)||b.username!==e.username)||!(!(0,v.hu)(t)||t.username!==e.username),o=()=>!!P.some((t=>t.username===e.username)),l=()=>{let t=M.find((t=>t.username===e.username));return!(void 0===t||!t.online)};return a.createElement(ue,ye({},e,{key:r,groupIsSelected:!!(0,v.hu)(k),isOnline:l(),isFetched:o(),isCurrentSelectedUser:n()}))}}))),(0,v.hu)(t)&&a.createElement(B.Z,{open:(0,v.hu)(t),onClose:ae,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},a.createElement(H.Z,{id:"alert-dialog-title"},"Clear conversation"),a.createElement(X.Z,null,a.createElement(Y.Z,{id:"alert-dialog-description"},`This action will permanently clear your entire chat history with ${t.username}. Continue?`)),a.createElement(R.Z,null,a.createElement(q.Z,{onClick:ae,style:{color:"red"}},"Cancel"),a.createElement(q.Z,{color:"primary",autoFocus:!0,onClick:()=>{(0,v.hu)(P.find((e=>e===t.username)))&&d((0,S.EG)(t.username)),b.username===t.username&&d((0,S.r0)({})),(async e=>{const[t,n]=["/chat/clearConversation","DELETE"];z({url:t,method:n,body:e})})({username:t.username}),d((0,u.c6)(t.username)),d((0,f.VB)(t.username)),ae()}},"Delete"))),(0,v.hu)(n)&&a.createElement(B.Z,{open:(0,v.hu)(n),onClose:ae,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},a.createElement(H.Z,{id:"alert-dialog-title"},"Exit group"),a.createElement(X.Z,null,a.createElement(Y.Z,{id:"alert-dialog-description"},"This action will permanently clear your entire chat history with the \n seleceted group and you'll no longer be a member of the group. Continue?")),a.createElement(R.Z,null,a.createElement(q.Z,{onClick:ae,style:{color:"red"}},"Cancel"),a.createElement(q.Z,{color:"primary",autoFocus:!0,onClick:()=>{(0,L.Z)("removeGroupUser",{_id:n,username:i,message:{type:"alert",chatId:(new Date).getTime(),message:`${i} left the group`,timestamp:(0,v.hi)()}}),(e=>{const[t,n]=["/chat/deleteGroup","DELETE"];z({url:t,method:n})})(),d((0,u.pK)(n)),d((0,y.iE)(n)),ae()}},"Delete"))),a.createElement(V.Z,{in:O||navigator.maxTouchPoints>0},a.createElement($.Z,{ariaLabel:"SpeedDial openIcon",className:m.speedDial,icon:a.createElement(J.Z,{openIcon:a.createElement(ee.Z,null)}),onClose:re,onOpen:re,open:A},a.createElement(K.Z,{icon:a.createElement(ee.Z,null),tooltipTitle:"Create new group",tooltipOpen:!0,onClick:()=>{re(),d((0,E.T6)({parent:"stack",component:"newGroup"}))}}))))};var be=n(4741),we=n(1267),xe=n(6447),ke=n(2157),Ce=n(1395);const Se=(0,l.Z)({groupUsers:{},header:{},searchbar:{width:"94%",paddingLeft:"20px",margin:"15px 0 10px 12px",borderRadius:"30px",boxShadow:"0 0 5px 2px #e9e9e9",height:"40px"},chips:{padding:"10px","& .MuiChip-root":{marginRight:5,marginBottom:5},"& .MuiChip-iconColorPrimary":{color:"#fafafa"},"& .MuiAvatar-root":{height:"28px",width:"28px",fontSize:"1rem"},"& .MuiChip-label":{}},listItem:{position:"relative"},checked:{position:"absolute",right:"10px","& .MuiSvgIcon-root":{fontSize:"1rem",color:"#8e9bb1"}},fab:{"&:hover":{backgroundColor:"cornflowerblue"},height:"auto",width:"auto",padding:"3% !important",background:"cornflowerblue",color:"#fff",boxShadow:"0 0 5px 1px #0000001c",position:"sticky",bottom:"1rem",left:"85%"},participants:{margin:"20px 0","& > div":{paddingLeft:5,marginTop:8,display:"flex","& > div":{marginRight:3}}},dialog:{"& .MuiDialog-paperScrollPaper":{minWidth:"285px"}}}),Ie=({user:e,isSelected:t})=>{const n=Se(),o=(0,r.I0)();return a.createElement(P.Z,{button:!0,className:n.listItem,onClick:()=>{o((0,y.P)(e))},disabled:t},a.createElement(I.Z,null,a.createElement(M.Z,{username:e.username})),a.createElement(N.Z,{primary:a.createElement(w.Z,{component:"h6",style:{fontFamily:"Roboto"}}," ",e.username)}),t&&a.createElement("div",{className:n.checked},a.createElement(Ce.Z,null)))},Ne=({className:e})=>{const{id:t,username:n,online:o}=(0,r.v9)((e=>e.account.account)),l=Se(),i=(0,r.I0)(),{useEffect:s,useState:c}=a,m=(0,r.v9)((e=>e.activeUsers.showActiveUsersLoader)),d=(0,r.v9)((e=>e.groups.selectedUsers)),p=(0,r.v9)((e=>e.activeUsers.activeUsers)),[h,f]=c(p),[g,Z]=c(!1),[b,I]=c(""),[N,P]=c(!1),[U,D]=c({error:!1,helperText:""}),A=()=>{i((0,E.T6)({component:"recentChats",parent:"stack"}))},z=()=>{Z(!g)},_=()=>{if(!o)return i((0,S.Pc)({open:!0})),i((0,E.T6)({component:"recentChats",value:!0})),!1;if(null!==b.match(/[0-9a-z]/i)){const e=new Date,t=e.getTime(),a=(0,v.hi)(e),r={name:b,createdBy:{username:n},createdAt:new Date,participants:d.concat({username:n}),admins:[{username:n}],messages:[{type:"alert",chatId:t,message:`${n} created this group`,timestamp:a},{type:"alert",chatId:t,message:`${n} added ${d.map((e=>e.username)).join(", ")} to the group`,timestamp:a}]};(0,L.Z)("newGroup",r,(()=>{me((e=>i((0,u.rO)(e)))),A()}))}else D({error:!0,helperText:"Please enter a group name"})};return a.createElement("section",{className:[l.groupUsers,e].join(" ")},a.createElement(T.Z,null,a.createElement(x.Z,{onClick:A},a.createElement(k.Z,null)),a.createElement(w.Z,{component:"h6"}," Create New Group ")),a.createElement(be.Z,{className:l.searchbar,placeholder:"Search a user",type:"text",onChange:({target:e})=>{var t;t=e.value,f(p.filter((e=>e.username.toLowerCase().includes(t.toLowerCase()))))}}),a.createElement("div",{className:l.chips},d.map(((e,t)=>a.createElement(we.Z,{key:e.pId,icon:a.createElement(M.Z,{username:e.username,badge:!1}),label:e.username,color:"primary",onDelete:()=>(e=>{i((0,y.qL)(e))})(e),variant:"outlined"})))),a.createElement("div",{className:l.userslist},m?a.createElement(C.Z,null):h.map((e=>a.createElement(Ie,{user:e,key:e.pId,isSelected:-1!==d.findIndex((t=>t.username===e.username))})))),a.createElement(x.Z,{variant:"extended",size:"small",color:"primary","aria-label":"add",className:l.fab,onClick:z,disabled:!(d.length>0)},a.createElement(ae.Z,{className:l.extendedIcon})),a.createElement(B.Z,{open:g,className:l.dialog,onClose:z,"aria-labelledby":"form-dialog-title"},a.createElement(H.Z,{id:"form-dialog-title"},"Create New Group"),a.createElement(X.Z,null,a.createElement(ke.Z,{placeholder:"Enter group name here",style:{width:"100%"},value:b,onChange:({target:e})=>{return t=e.value,D({error:!1,helperText:""}),void I(t);var t},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||e.ctrlKey||(e.preventDefault(),_())},error:U.error,helperText:U.helperText}),a.createElement("div",{className:l.participants},a.createElement(w.Z,null," Participants "),a.createElement("div",null,d.map(((e,t)=>a.createElement(xe.ZP,{title:e.username,"aria-label":"username",key:t},a.createElement("div",{className:l.groupUser},a.createElement(M.Z,{username:e.username,badge:!1})))))))),a.createElement(R.Z,null,a.createElement(q.Z,{color:"primary",onClick:z}," Cancel "),a.createElement(q.Z,{style:{color:"red"},onClick:_}," Create "))))};var Pe=n(2972),Te=n(7483),Me=n(7395),Ue=n(8121),Le=n(5432),De=n(5517),Ae=n(6837),ze=n(2822),_e=n(5212),Oe=n(9067);const Fe=(e,t)=>{const[n,a]=["/account/updateSocials","PUT"];z({url:n,method:a,body:e},(e=>t(e)))},Ge=(0,l.Z)((e=>({dialog:{"& .MuiDialog-paperWidthSm":{width:"350px"}},disabled:{color:"rgba(0,0,0,.3)"},formField:{marginBottom:"1rem","& > label":{display:"flex",alignItems:"center",marginBottom:".4rem","& .MuiSvgIcon-root":{color:"#455a7e",fontSize:"1rem",marginLeft:".5rem"}},"& > button":{color:"#fff",margin:"1rem 0 1.5rem 0"},"& .MuiFormControl-root":{width:"100%","& .MuiOutlinedInput-input":{padding:"13px 10px"}},"& .MuiButton-contained.Mui-disabled":{color:"#fff",backgroundColor:"#9eb9e9"}},editIcon:{color:"#6e84ab"}}))),We=({open:e})=>{const{useState:t,useEffect:n}=a,o=(0,r.I0)(),{displayName:l,bio:i,id:c}=(0,r.v9)((e=>e.account.account)),m=Ge(),[d,u]=t(!1),[p,f]=t(!1),[g,E]=t(!1),[y,v]=t(!1),[Z,b]=t({displayName:!1,bio:!1}),[w,k]=t({displayName:"This will be visible to all users",bio:""}),[C,I]=t({displayName:l,bio:i});n((()=>{I({displayName:l,bio:i})}),[d]);const N=()=>{u(!1)},P=()=>{E(!0),f(!0),v(!0),((e,t)=>{const[n,a]=["/account/saveProfileInfo","PUT"];z({url:n,method:a,body:e},(e=>(e=>{o((0,h.k6)(e)),o((0,S.Pc)({open:!0,severity:"success",msg:"Profile updated successfully"})),E(!1),f(!1),v(!1),N()})(e)))})(C)};return a.createElement(a.Fragment,null,a.createElement(x.Z,{className:m.profileEdit,onClick:()=>{u(!0)}},a.createElement(Oe.Z,{className:m.editIcon})),a.createElement(B.Z,{open:d,className:m.dialog,onClose:N,"aria-labelledby":"form-dialog-title"},a.createElement(H.Z,{id:"form-dialog-title"},"Edit Profile",a.createElement(Oe.Z,{className:m.editIcon,style:{fontSize:"1rem",marginLeft:".5rem"}})),a.createElement(X.Z,null,a.createElement("form",{onSubmit:e=>e.preventDefault()},a.createElement("fieldset",null,a.createElement("div",{className:m.formField},a.createElement("label",{htmlFor:"displayName"}," Dispaly name "),a.createElement(ke.Z,{required:!0,type:"text",autoComplete:"username",id:"displayName",variant:"outlined",color:"primary",placeholder:"Set your display name here",error:Z.displayName,helperText:w.displayName,value:C.displayName,disabled:y,onChange:({target:e})=>{var t;t=e.value,I({...C,displayName:t})}})),a.createElement("div",{className:m.formField},a.createElement("label",{htmlFor:"bio"},"Bio",a.createElement(Le.Z,{className:m.labelIcon})),a.createElement(ke.Z,{required:!0,type:"text",placeholder:"Give a short description about yourself",autoComplete:"bio",id:"bio",variant:"outlined",color:"primary",multiline:!0,error:Z.bio,helperText:w.bio,value:C.bio,disabled:y,onChange:({target:e})=>{var t;t=e.value,I({...C,bio:t})}}))))),a.createElement(R.Z,null,a.createElement(q.Z,{onClick:N,color:"primary"},"Cancel"),a.createElement(q.Z,{disabled:p,onClick:()=>{P()},color:"primary"},g?a.createElement(a.Fragment,null,"Save  ",a.createElement(s.Preloader,{use:s.Oval,size:20,strokeWidth:15,strokeColor:"#9eb9e9",duration:1e3})):"Save"))))},je=(0,l.Z)((e=>({inputs:{display:"flex"},editButton:{textTransform:"none",color:"#486eb3",background:"#f3f3f3",padding:0,fontSize:"1rem"},headerActions:{position:"absolute",right:0},banner:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"1rem"},profileInfo:{padding:"1rem 0 .5rem 0",width:"100%"},profileImage:{position:"relative"},avatarPlaceholder:{position:"absolute",top:0,width:"100%",cursor:"pointer",height:"100%",zIndex:20,display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"flex-end",background:"#ffffffb5",borderRadius:"100%","& .MuiSvgIcon-root":{fontSize:"3rem",color:"#494f5af2"},"& .MuiTypography-body1":{fontSize:"1.2rem",color:"#13171e",textShadow:"1px 1px 0px #e9e9e9"}},info:{margin:"0 auto",alignItems:"center",display:"flex",flexDirection:"column",marginBottom:12,"& .MuiListItem-root":{padding:"0 16px"},"& .MuiListItemIcon-root":{minWidth:0,marginRight:6},"& .MuiTypography-body1":{fontSize:"1.07rem"},"& .MuiTypography-h2":{fontSize:"1.3rem"},"& .MuiIconButton-root":{alignSelf:"flex-end"},"& .MuiSvgIcon-root":{marginLeft:5,fontSize:"1rem"}},infoHandle:{display:"flex",flexDirection:"column",alignItems:"flex-start",marginBottom:"10px","& > span:first-child":{fontSize:".9rem",color:"#707f91",display:"flex",alignItems:"center"},"& > span:last-of-type":{marginLeft:"3px"}},list:{width:"100%",backgroundColor:e.palette.background.paper,"& > .MuiListItem-root":{padding:"0 5px 5px 18px",cursor:"pointer","& .MuiTypography-body1":{color:"#000"},"& .MuiSvgIcon-root":{fontSize:"1.3rem"}}},nested:{padding:"0 10px 0 18px"},logout:{"& .MuiListItemIcon-root":{minWidth:"35px"}}}))),Be=({className:e})=>{const t=je(),n=(0,r.I0)(),{username:o,id:l,displayName:i,bio:s,status:c,email:m,notifications:d}=(0,r.v9)((e=>e.account.account)),[u,p]=a.useState(!1),[f,g]=a.useState({name:!1,bio:!1}),[y,v]=a.useState(""),[Z,b]=a.useState(""),[C,S]=a.useState(null),[U,L]=a.useState(!1),[A,_]=a.useState({name:""}),[O,F]=a.useState({name:!1}),[G,W]=a.useState({name:!0}),[j,B]=a.useState(!1),[R,X]=a.useState(""),[Y,H]=a.useState(!1),[q,$]=a.useState(!1),[J,K]=a.useState(null),Q=(Boolean(J),e=>{n((0,E.T6)(e))}),ee=e=>{p(!0),((e,t)=>{const[a,r]=["/account/setNotify","PUT"];z({url:a,method:r,body:e},(e=>(e=>{n((0,h.x0)(e)),p(!1)})(e)))})({update:e})},te=()=>{(e=>{const[t,n]=["/auth/logout","DELETE"];z({url:t,method:n},(e=>((0,D.DH)(),void(document.location="/"))))})()},ne=e=>{$(e)};return a.createElement("section",{className:[t.settings,e].join(" ")},a.createElement(T.Z,null,a.createElement(x.Z,{onClick:()=>Q({parent:"stack",component:"recentChats"})},a.createElement(k.Z,null)),a.createElement(w.Z,{component:"h6"}," Profile "),a.createElement("div",{className:t.headerActions},a.createElement(We,null)),u&&a.createElement(_e.Z,null)),a.createElement("div",{className:t.profileBody},a.createElement("div",{className:t.banner},a.createElement("div",{className:t.profileImage,onMouseOver:()=>ne(!0),onMouseLeave:()=>ne(!1)},a.createElement(V.Z,{in:q},a.createElement("div",{className:t.avatarPlaceholder},a.createElement(Te.Z,null))),a.createElement(M.Z,{username:o,style:{width:200,height:200,fontSize:"4rem"},badge:!1})),a.createElement("div",{className:t.profileInfo},a.createElement("div",{className:t.info},a.createElement(P.Z,{title:"username"},a.createElement(N.Z,{primary:a.createElement("span",{className:t.infoHandle},a.createElement("span",null," User name "),a.createElement("span",null," ","@"+o," "))})),void 0!==i&&""!==i&&a.createElement(P.Z,{title:"display name"},a.createElement(N.Z,{primary:a.createElement("span",{className:t.infoHandle},a.createElement("span",null," Display name "),a.createElement("span",null," ",i," "))})),a.createElement(P.Z,null,a.createElement(N.Z,{primary:""===s?a.createElement("span",{style:{fontStyle:"italic",color:"#818181"}}," Your bio is empty "):a.createElement("span",{className:t.infoHandle},a.createElement("span",null," Bio ",a.createElement(Le.Z,null)," "),a.createElement("span",null," ",s," "))}))))),a.createElement(De.Z,null),a.createElement("div",{className:t.settings},a.createElement(ze.Z,{component:"div",className:t.list,subheader:a.createElement(Ae.Z,{component:"div",id:"nested-list-subheader"},"Account")},a.createElement(P.Z,{onClick:()=>Q({component:"contactInfo",parent:"stack"})},a.createElement(N.Z,{primary:"Contact info"}),a.createElement(Ue.Z,null)),a.createElement(P.Z,{onClick:()=>Q({component:"resetPassword",parent:"stack"})},a.createElement(N.Z,{primary:"Update password"}),a.createElement(Ue.Z,null))),a.createElement(ze.Z,{component:"div",className:t.list,subheader:a.createElement(Ae.Z,{component:"div",id:"nested-list-subheader"},"Notification")},a.createElement(P.Z,{button:!0,onClick:()=>ee({...d,notify:!d.notify})},a.createElement(N.Z,{primary:"Notification"}),a.createElement(Me.Z,{checked:d.notify,color:"primary"})),a.createElement(P.Z,{button:!0,onClick:()=>ee({...d,sound:!d.sound})},a.createElement(N.Z,{primary:"Sound"}),a.createElement(Me.Z,{checked:d.sound,color:"primary"}))),a.createElement(ze.Z,null,a.createElement(P.Z,{button:!0,className:t.logout,onClick:()=>te()},a.createElement(I.Z,null,a.createElement(Pe.Z,null)),a.createElement(N.Z,{primary:"Log out"}))))))};var Re=n(7397),Xe=n(4837),Ye=n(8715),He=n(1270),qe=n(1738),$e=n(8963),Je=n(1019),Ke=n(6912),Ve=n(9753);const Qe=(0,l.Z)({body:{margin:"20px 0"},form:{width:"90%",margin:"0 auto",display:"flex",flexDirection:"column","& .MuiFormControl-root":{paddingBottom:10},"& .MuiButtonGroup-root":{marginTop:10,flexDirection:"column","& button":{boxShadow:"-1px 1px 1px 0px #c3c3c3",fontSize:".84rem",marginBottom:10,color:"#fff"}}},input:{"& .MuiOutlinedInput-root":{"& input":{padding:"10px",fontSize:".95rem"},"& .MuiSvgIcon-root":{fontSize:"1.2rem"}}}}),et=({className:e})=>{const{id:t}=(0,r.v9)((e=>e.account.account)),n=(0,r.I0)(),o=Qe(),[l,i]=a.useState(!1),[s,c]=a.useState(!1),[m,d]=a.useState({former:!1,newPassword:!1,confirmPassword:!1}),[u,p]=a.useState({former:"",newPassword:"",confirmPassword:""}),[h,f]=a.useState({former:!1,newPassword:!1,confirmPassword:!1}),[g,y]=a.useState({former:"",newPassword:"",confirmPassword:""}),v=()=>{i(!1)},Z=async e=>{c(!0),p({...u,former:"",newPassword:"",confirmPassword:""}),((e,t)=>{const[n,a]=["/account/updatePassword","PUT"];z({url:n,method:a,body:e},(e=>(c(!1),void i(!0))))})(e)},b=e=>{n((0,E.T6)(e))},C=(e,t)=>{f({...h,former:!1,newPassword:!1,confirmPassword:!1}),y({...g,former:"",newPassword:"",confirmPassword:""}),"former"===t&&p({...u,former:e}),"newPassword"===t&&p({...u,newPassword:e}),"confirmPassword"===t&&p({...u,confirmPassword:e})},S=e=>{d({...m,[`${e}`]:!m[`${e}`]})};return a.createElement("section",{className:[o.resetPassword,e].join(" ")},a.createElement(T.Z,null,a.createElement(x.Z,{onClick:()=>b({component:"settings",parent:"stack"})},a.createElement(k.Z,null)),a.createElement(w.Z,{component:"h6"}," Reset Password "),s&&a.createElement(_e.Z,null)),a.createElement("div",{className:o.body},a.createElement("form",{onSubmit:async e=>{c(!0);const{former:t,newPassword:n,confirmPassword:a}=u;((e,t)=>{const[r,o]=["/account/matchPassword","PUT"];z({url:r,method:o,body:e},(e=>(e=>{if(e.error){let t=Object.keys(e.error),n={};return t.map((e=>n[e]=!0)),f({...h,...n}),void y({...g,...e.error})}return n!==a?(f({...h,confirmPassword:!0,newPassword:!0}),void y({...g,confirmPassword:"Passwords do not match"})):n.length<=4?(f({...h,confirmPassword:!0,newPassword:!0}),void y({...g,confirmPassword:"Password is too short. Password length should be more than 5 characters"})):void Z(u)})(e)))})({former:t})},className:o.form},a.createElement(ke.Z,{variant:"outlined",onChange:e=>C(e.target.value,"former"),className:o.input,value:u.former,placeholder:"Former password",type:"password",required:!0,error:h.former,type:m.former?"text":"password",helperText:g.former,autoComplete:"current-password",InputProps:{startAdornment:a.createElement(Re.Z,{position:"start"},a.createElement(Je.Z,{color:"secondary"})),endAdornment:a.createElement(Re.Z,{position:"end"},a.createElement(x.Z,{color:"secondary","aria-label":"Toggle password visibility",onClick:()=>S("former")},m.former?a.createElement(He.Z,null):a.createElement(qe.Z,null)))}}),a.createElement(ke.Z,{variant:"outlined",className:o.input,onChange:e=>C(e.target.value,"newPassword"),value:u.newPassword,placeholder:"New password",type:"password",required:!0,autoComplete:"new-password",error:h.newPassword,type:m.newPassword?"text":"password",InputProps:{startAdornment:a.createElement(Re.Z,{position:"start"},a.createElement($e.Z,{color:"secondary"})),endAdornment:a.createElement(Re.Z,{position:"end"},a.createElement(x.Z,{color:"secondary","aria-label":"Toggle password visibility",onClick:()=>S("newPassword")},m.newPassword?a.createElement(He.Z,null):a.createElement(qe.Z,null)))}}),a.createElement(ke.Z,{variant:"outlined",className:o.input,onChange:e=>C(e.target.value,"confirmPassword"),value:u.confirmPassword,placeholder:"ConfirmPassword password",type:"password",required:!0,autoComplete:"new-password",error:h.confirmPassword,helperText:g.confirmPassword,type:m.confirmPassword?"text":"password",InputProps:{startAdornment:a.createElement(Re.Z,{position:"start"},a.createElement(Ve.Z,{color:"secondary"})),endAdornment:a.createElement(Re.Z,{position:"end"},a.createElement(x.Z,{color:"secondary","aria-label":"Toggle password visibility",onClick:()=>S("confirmPassword")},m.confirmPassword?a.createElement(He.Z,null):a.createElement(qe.Z,null)))}}),a.createElement(Xe.Z,null,a.createElement(q.Z,{variant:"contained",disabled:s,type:"submit",color:"primary"},"Update password"),a.createElement(q.Z,{onClick:()=>{b({component:"settings",value:!0})},color:"primary",variant:"contained",type:"button"},"Cancel")))),a.createElement(Ke.Z,{open:l,autoHideDuration:6e3,onClose:v},a.createElement(Ye.Z,{variant:"filled",elevation:6,onClose:v,severity:"success"},"Password changed successfully")))};var tt=n(1860),nt=n(6353),at=n(1959),rt=n(4080),ot=n(8880),lt=n(3792),it=n(4363),st=n(4704),ct=n(8428);const mt=(0,l.Z)({contactInfo:{position:"relative",height:"100%"},list:{"& .MuiListItem-root":{"& .MuiAvatar-root":{backgroundColor:"#9696b9"},"& .MuiListItemText-primary":{color:"#3c1908",overflow:"hidden",textOverflow:"ellipsis",whitSpace:"nowrap",padding:"0 14px 0 0"},"& .MuiTypography-body2":{display:"flex",alignItems:"center","& .MuiSvgIcon-root":{fontSize:"1.1rem",marginRight:5,color:"#4c4c6c"}}}},speedDial:{alignItems:"flex-end",position:"absolute",bottom:"1rem",right:"1rem","& .MuiFab-primary":{background:"cornflowerblue",color:"#fff"}},collapseDiv:{display:"flex",justifyContent:"center"},addLinkInput:{width:"70%"},privacy:{textTransform:"initial"},socialList:{"& .MuiListItemSecondaryAction-root":{right:5,display:"flex","& .MuiIconButton-root":{"& svg":{fontSize:"1.2rem",color:"#e98181"}},"& .MuiIconButton-root:first-child":{"& svg":{color:"#5d7297"}}}},bottomSnackbar:{position:"absolute",width:"100%",bottom:"5rem"}}),dt=[{icon:a.createElement(st.Z,{style:{color:"#1DA1F2"}}),name:"twitter"},{icon:a.createElement(lt.Z,{style:{color:"#4267B2"}}),name:"facebook"},{icon:a.createElement(it.Z,{style:{color:"#C13584"}}),name:"instagram"}],ut=({className:e})=>{const{id:t}=(0,r.v9)((e=>e.account.account)),n=(0,r.I0)(),o=mt(),[l,i]=a.useState(!1),{username:s,socials:c,online:m}=(0,r.v9)((e=>e.account.account)),[d,u]=a.useState(!1),[p,f]=a.useState(!1),[g,y]=a.useState(!1),[v,Z]=a.useState({show:!1,message:""}),[b,C]=a.useState({error:!1,helperText:""}),S=c.find((e=>"email"===e.name)),[I,M]=a.useState({open:!1,icon:"",social:{name:"",link:"",hidden:!0}}),[U,L]=a.useState(!1),D=()=>{f(!1)},A=({icon:e,name:t})=>{M({open:!0,icon:e,social:{name:t,link:"",hidden:!0}})},_=e=>{Fe(e,(()=>{})),n((0,h.kb)(e)),Z({show:!0,message:"Privacy updated"})},O=()=>{Z({show:!1,message:""})};return a.createElement("section",{className:[o.contactInfo,e].join(" ")},a.createElement(T.Z,null,a.createElement(x.Z,{onClick:()=>{return e={component:"settings",parent:"stack"},void n((0,E.T6)(e));var e}},a.createElement(k.Z,null)),a.createElement(w.Z,{component:"h6"}," Contact info "),d&&a.createElement(_e.Z,null)),a.createElement("div",{className:o.contactBody},a.createElement(ze.Z,{className:o.list},a.createElement(P.Z,{button:!0},a.createElement(nt.Z,null,a.createElement(he.Z,null,a.createElement(ot.Z,null))),a.createElement(N.Z,{primary:S.link,secondary:a.createElement(q.Z,{className:o.privacy,onClick:()=>{_({...S,hidden:!S.hidden})}},S.hidden?a.createElement(a.Fragment,null," ",a.createElement(rt.Z,null),a.createElement(w.Z,{variant:"subtitle2",component:"span"}," Only me ")):a.createElement(a.Fragment,null,a.createElement(Q.Z,null),a.createElement(w.Z,{variant:"subtitle2",component:"span"}," Public ")))})),a.createElement(ze.Z,{className:o.socialList,subheader:a.createElement(Ae.Z,{component:"div",id:"nested-list-subheader"},"Other social handles")},c.filter((e=>"email"!==e.name)).map(((e,t)=>{const{icon:r}=dt.find((t=>t.name===e.name));return a.createElement(P.Z,{button:!0,key:t},a.createElement(nt.Z,null,a.createElement(x.Z,null,r)),a.createElement(N.Z,{primary:a.createElement("a",{style:{textDecoration:"underline"},target:"_blank",rel:"noreferrer",href:e.link}," ",e.link.replace("https://","")," "),secondary:a.createElement(q.Z,{className:o.privacy,onClick:()=>{_({...e,hidden:!e.hidden})}},e.hidden?a.createElement(a.Fragment,null," ",a.createElement(rt.Z,null),a.createElement(w.Z,{variant:"subtitle2",component:"span"}," Only me ")):a.createElement(a.Fragment,null,a.createElement(Q.Z,null),a.createElement(w.Z,{variant:"subtitle2",component:"span"}," Public ")))}),a.createElement(tt.Z,null,a.createElement(x.Z,{onClick:()=>A({name:e.name,icon:r})},a.createElement(Oe.Z,null)),a.createElement(x.Z,{onClick:()=>(e=>{((e,t)=>{const[n,a]=["/account/deleteSocial","delete"];z({url:n,method:a,body:e})})(e),n((0,h.Nv)(e)),Z({show:!0,message:"Contact deleted successfully"})})(e)},a.createElement(ct.Z,null))))}))),I.open&&a.createElement(V.Z,{in:I.open},a.createElement(P.Z,null,a.createElement(nt.Z,null,I.icon),a.createElement(ke.Z,{className:o.addLinkInput,placeholder:"Enter a link",onChange:({target:e})=>{M({...I,social:{...I.social,link:e.value.trim()}}),b.error&&C({error:!1,helperText:""})},error:b.error,helperText:b.helperText,value:I.social.link}),a.createElement(Re.Z,{position:"end",style:{height:"100%"}},a.createElement(x.Z,{onClick:()=>{const e=(t=I.social.link).includes("https://")?"https://"===t?{error:!0,helperText:"Complete the link with your username"}:{error:!1,helperText:""}:{error:!0,helperText:"Link must contain https://"};var t;C({...e}),!e.error&&m&&(Fe(I.social,(()=>{})),n((0,h.kb)(I.social)))}},a.createElement(at.Z,{style:{color:"#645faf"}})))))),a.createElement(Ke.Z,{className:o.bottomSnackbar,anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:2e3,message:v.message,open:v.show,onClose:O},a.createElement(Ye.Z,{variant:"filled",elevation:6,onClose:O,severity:"success"},v.message)),a.createElement($.Z,{ariaLabel:"SpeedDial openIcon",className:o.speedDial,icon:a.createElement(J.Z,{openIcon:a.createElement(Oe.Z,null)}),onClose:D,onOpen:()=>{f(!0)},open:p},dt.map(((e,t)=>a.createElement(K.Z,{key:t,style:{...e.style,color:"#000"},key:e.name,icon:e.icon,tooltipTitle:e.name,onClick:()=>{D(),A(e)}}))))))};var pt=n(3379),ht=n.n(pt),ft=n(7795),gt=n.n(ft),Et=n(569),yt=n.n(Et),vt=n(3565),Zt=n.n(vt),bt=n(9216),wt=n.n(bt),xt=n(4589),kt=n.n(xt),Ct=n(7041),St={};St.styleTagTransform=kt(),St.setAttributes=Zt(),St.insert=yt().bind(null,"head"),St.domAPI=gt(),St.insertStyleElement=wt(),ht()(Ct.Z,St);const It=Ct.Z&&Ct.Z.locals?Ct.Z.locals:void 0,Nt=[It.animate__fadeInRight,It.animate__animated].join(" "),Pt=c.ZP.section.attrs((e=>({})))`
	z-index: 25;
	display: flex;
	width: ${e=>e.width+"px"};
	min-width: ${e=>e.minWidth+"px"};
	max-width: 400px;

	.wrap {
		background: ${b.Z.white};
		width: 100%;
		overflow-y: scroll;

		& > section {
			width: 100%
		}

	}


	@media (max-width: 660px) {
		width: 100%;
		max-width: 100%;
		min-width: 100%;
	}

	.resize {
		cursor: col-resize;
		display: flex;
		align-items: center;
		width: 1px;

		.MuiSvgIcon-root {
			fill: #a5a5a5;
		}

		@media (max-width: 660px) {
			display: none;
		}

	}
`,Tt=()=>{const{activeUsers:e,recentChats:t,contactInfo:n,settings:o,resetPassword:l,newGroup:i}=(0,r.v9)((e=>e.components.stack)),[s,c]=a.useState(330);return a.createElement(Pt,{width:s,minWidth:330},a.createElement("div",{className:"wrap"},e&&a.createElement(G,{className:Nt}),t&&a.createElement(Ze,{className:Nt}),i&&a.createElement(Ne,{className:Nt}),o&&a.createElement(Be,{className:Nt}),n&&a.createElement(ut,{className:Nt}),l&&a.createElement(et,{className:Nt})))},Mt=e=>{z({url:"/account/users",method:"GET"},(t=>e(t)))},Ut=(0,l.Z)({main:{background:"linear-gradient(266deg, #e9e9e9, #d3920026)",display:"flex",height:"100%"}}),Lt=({user:e})=>{const{id:t,username:n}=(0,r.v9)((e=>e.account.account)),l=Ut(),s=(0,r.I0)(),c=(0,r.v9)((e=>e.other.currentSelectedUser)),{leftPane:m,rightPane:b,app:w}=(0,r.v9)((e=>e.components)),x=(0,r.v9)((e=>e.activeUsers.activeUsers)),k=(0,r.v9)((e=>e.groups.selectedGroup)),C=(0,r.v9)((e=>e.other.fetched)),S=((0,r.v9)((e=>e.groups.fetchedGroups)),(0,i.x)()),{useEffect:I}=a;return I((()=>{(0,Z.Z)({token:t,username:n}),(e=>{const[t,n]=["/account/accountData","GET"];z({url:t,method:n},(e=>(e=>{s((0,h.Y)(e)),e&&s((0,E.F$)(!0))})(e)))})(),me((e=>{s((0,u.rO)(e)),Z.W.emit("getOnileUsers")})),Mt((e=>{s((0,p.i9)(e)),Z.W.emit("getOnileUsers")}))}),[]),Z.W.off("connect").on("connect",(()=>{s((0,h.VT)(!0))})),Z.W.off("disconnect").on("disconnect",(e=>{s((0,h.VT)(!1))})),Z.W.off("onlineUsers").on("onlineUsers",(e=>{s((0,p.IF)(e.filter((e=>e.username!==n)))),s((0,g.Rx)(e.filter((e=>e.username!==n))))})),Z.W.off("userDisconnect").on("userDisconnect",(e=>{s((0,p.Ov)(e)),s((0,g.Fz)(e))})),Z.W.off("starredChat").on("starredChat",((e,t)=>{s((0,f.Fb)({friendsName:e,starredChat:t}))})),Z.W.off("deleteChat").on("deleteChat",(e=>{s((0,f.Rm)(e)),s((0,u.Tt)(e))})),Z.W.off("fetchGroupInfo").on("fetchGroupInfo",(({_id:e})=>{fe(e,(e=>{s((0,u.it)(e))}))})),Z.W.off("setGroupSettings").on("setGroupSettings",(({_id:e,settings:t})=>{s((0,y.AN)({_id:e,field:{settings:t}}))})),Z.W.off("setGroupDesc").on("setGroupDesc",(({_id:e,description:t})=>{s((0,y.AN)({_id:e,field:{description:t}}))})),Z.W.off("setGroupName").on("setGroupName",(({_id:e,name:t})=>{fe(e,(e=>{s((0,u.it)(e))})),s((0,y.AN)({_id:e,field:{name:t}}))})),Z.W.off("setGroupAdmins").on("setGroupAdmins",(({_id:e,admins:t})=>{s((0,y.AN)({_id:e,field:{admins:t}}))})),Z.W.off("addGroupParticipants").on("addGroupParticipants",(({_id:e,participants:t})=>{fe(e,(e=>{s((0,u.it)(e))})),s((0,y.AN)({_id:e,field:{participants:t}}))})),Z.W.off("removeGroupUser").on("removeGroupUser",(({_id:e,participants:t,admins:n})=>{s((0,y.AN)({_id:e,field:{participants:t,admins:n}}))})),Z.W.off("chatFromGroup").on("chatFromGroup",(({_id:e,chat:t})=>{s((0,y.CG)({_id:e,chat:t})),((0,v.hu)(k)&&k._id!==e||!(0,v.hu)(k))&&(z({url:"/chat/setGroupUnread",method:"PUT",body:{groupId:e,chatId:t.chatId}},(e=>cb(e))),s((0,u.w)({_id:e,chatId:t.chatId}))),s((0,u.p5)({_id:e,lastChat:t}))})),Z.W.off("deleteGroupChat").on("deleteGroupChat",(({_id:e,chatId:t})=>{s((0,y.VV)({_id:e,chatId:t})),s((0,u.Kv)({_id:e,chatId:t}))})),Z.W.off("groupTyping").on("groupTyping",(({_id:e,username:t,typing:n})=>{s((0,y.Zv)({_id:e,username:t,typing:n})),s((0,u.l4)({_id:e,username:t,typing:n}))})),Z.W.off("chatFromUser").on("chatFromUser",(e=>{function t(){s((0,f.lC)(e)),C.some((t=>t.username===e.sender))||s((0,u.IJ)({username:e.sender,lastChat:e.message}))}void 0!==x.find((t=>t.username===e.sender))?t():Mt((e=>{(0,p.i9)(e),Z.W.emit("getOnileUsers"),t()})),(0,v.hu)(c)&&c.username===e.sender||((({sender:e,chatId:t})=>{z({method:"PUT",url:"/chat/saveUnread",body:{sender:e,chatId:t}})})({sender:e.sender,chatId:e.message.chatId}),s((0,u.LP)({friendsName:e.sender,chatId:e.message.chatId})),s((0,u.IJ)({username:e.sender,lastChat:e.message}))),(0,v.hu)(c)&&c.username===e.sender&&Z.W.emit("chatIsRead",{sender:c.username,receiver:n})})),Z.W.off("chatHasBeenRead").on("chatHasBeenRead",(({sender:e,receiver:t})=>{s((0,f.dA)(t)),s((0,u.QG)(t))})),Z.W.off("userIsTyping").on("userIsTyping",(e=>{s((0,u.f8)(e)),s((0,p.t5)(e))})),w.display?a.createElement("section",{className:l.main,style:{height:S+"px"}},m&&a.createElement(Tt,null),a.createElement(o.j3,null)):a.createElement(d,null)}},5212:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(7294),r=n(3681);const o=(0,n(1120).Z)({progress:{position:"absolute",top:"120%",width:"98%",height:"3px",margin:"0 auto"}}),l=()=>{const e=o();return a.createElement(r.Z,{color:"primary",className:e.progress})}},1867:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(7294),r=n(1120),o=n(4741);const l=(0,r.Z)({searchbar:{width:"100%",border:"1px solid #cdd3dd",padding:"5px 15px",borderRadius:"100px",margin:"0 9px","& .MuiInputBase-input":{fontSize:".9rem",color:"#0d2c66"},"& .MuiInputAdornment-positionStart":{"& p":{color:"#63718d"}}}}),i=({input:e,onChange:t,placeholder:n="Search",classNames:r=[]})=>{const i=l();return a.createElement(o.Z,{className:[i.searchbar,...r].join(" "),placeholder:n,type:"text",value:e,onChange:({target:e})=>{t(e.value)}})}},3247:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(7294),r=n(1120),o=n(3084);const l=(0,r.Z)({root:{display:"flex",alignItems:"center",fontSize:".91rem",height:"20px","& > div":{marginLeft:"8px"}}}),i=function({children:e}){const t=l();return a.createElement("span",{className:t.root},e,a.createElement(o.Preloader,{use:o.ThreeDots,size:32,strokeWidth:12,strokeColor:"pink",duration:800}))}},6426:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(7294),r=n(3901),o=n(9009),l=n(1120);const i=["#6495ed","#cb64ed","#64ed94","#7364ed","#64a1ed","#edb664","#eda364","#64c7ed","#ed7d64","#ed6471"],s=(0,l.Z)({avatar:{fontWeight:"bold",textTransform:"uppercase"},offline:{"& .MuiBadge-dot":{boxShadow:"0px 0px 0px 2px #fff"}},online:{"& .MuiBadge-dot":{background:"#8ae76b",boxShadow:"0px 0px 0px 2px #fff"}}}),c=({props:e,style:t,firstAndLastName:n})=>{const l=s();return a.createElement(o.Z,{variant:"dot",className:l.online,overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"}},a.createElement(r.Z,{className:[l.avatar,e.className].join(" "),style:t},n))},m=e=>{const t=s(),n={background:i[e.username.split(" ").join("").length-1]||"#ed6471",...e.style};let o="",l=e.username.split(" ");return l.length<=2?l.forEach((e=>o+=e[0])):o=l[0][0]+l[l.length-1][0],e.badge?a.createElement(c,{props:e,style:n,firstAndLastName:o}):a.createElement(r.Z,{className:[e.className,t.avatar].join(" "),style:n},o)}},4199:(e,t,n)=>{n.d(t,{$s:()=>r,DH:()=>o,cK:()=>a});const a=(e,t)=>{const{jwt:n,username:a,id:r}=e;sessionStorage.setItem("jwt",JSON.stringify(n)),localStorage.setItem("user",JSON.stringify({username:a,id:r})),t()},r=e=>{sessionStorage.setItem("jwt",JSON.stringify(e))},o=()=>{sessionStorage.clear(),localStorage.clear()}},6367:(e,t,n)=>{n.d(t,{x:()=>r});var a=n(7294);const r=()=>{const[e,t]=a.useState(`${window.innerHeight}`);function n(){t(`${window.innerHeight}`)}return window.addEventListener("resize",n),a.useEffect((()=>()=>window.removeEventListener("resize",n)),[]),e}},2005:(e,t,n)=>{function a(e){let t,n,a=e.toDateString(),r=a.match(/[0-9][0-9][0-9][0-9]/);return null!==r&&(t=r[0],n=a.slice(0,r.index-1)),{year:t,day:n}}function r(e=new Date){let t=e.toDateString();const n=/[0-9](?=[0-9]{3})/.exec(t).index,a=t.split("").splice(n).join(""),r=t.split("").splice(0,n-1).join(""),o=e.toLocaleTimeString("en-US",{hour12:!0,hour:"2-digit",minute:"2-digit"});return{year:a,day:r,fullDate:e.toString(),time:o}}function o(e,t){const n=a(new Date(e)),r=a(new Date);return n.day===r.day?t.time:n.day}function l(e){if(!e)return"recently";let t=new Date,n=new Date(e),a=n.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"});if(n.toDateString()===t.toDateString())return a;{let e=n.toDateString(),t=/[0-9](?=[0-9]{3})/.exec(e).index;return e.split("").splice(0,t-1).join("")}}function i(e){try{if(null==e)return!1;if("number"==typeof e)return-1!==e;if("boolean"==typeof e)return e;if(Array.isArray(e))return e.length>0;if(Object.keys(e).length>0)return!0}catch(e){return e}return!1}n.d(t,{Co:()=>o,hi:()=>r,hu:()=>i,xq:()=>l})},6140:(e,t,n)=>{n.d(t,{W:()=>a,Z:()=>r});const a=(0,n(3992).io)("/user",{autoConnect:!1,forceNew:!0});function r(e){const{token:t,username:n}=e;a.auth={token:t,username:n},a.connect()}},3268:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(6140);function r(e,...t){var n,r;n=e,r=t,a.W.emit(n,...r)}},7041:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(8081),r=n.n(a),o=n(3645),l=n.n(o)()(r());l.push([e.id,"\r\n.AwmRHMFTDP8V4WJBxBx6 {\r\n  -webkit-animation-duration: .5s;\r\n  animation-duration: .5s;\r\n  -webkit-animation-duration: var(--animate_duration);\r\n  animation-duration: var(--animate_duration);\r\n  -webkit-animation-fill-mode: both;\r\n  animation-fill-mode: both\r\n}\r\n\r\n@-webkit-keyframes mmFPAcMi2dF_q3dA8fTW {\r\n    0% {\r\n        -webkit-transform: translateX(0);\r\n        transform: translateX(0)\r\n    }\r\n\r\n    6.5% {\r\n        -webkit-transform: translateX(-6px) rotateY(-9deg);\r\n        transform: translateX(-6px) rotateY(-9deg)\r\n    }\r\n\r\n    18.5% {\r\n        -webkit-transform: translateX(5px) rotateY(7deg);\r\n        transform: translateX(5px) rotateY(7deg)\r\n    }\r\n\r\n    31.5% {\r\n        -webkit-transform: translateX(-3px) rotateY(-5deg);\r\n        transform: translateX(-3px) rotateY(-5deg)\r\n    }\r\n\r\n    43.5% {\r\n        -webkit-transform: translateX(2px) rotateY(3deg);\r\n        transform: translateX(2px) rotateY(3deg)\r\n    }\r\n\r\n    50% {\r\n        -webkit-transform: translateX(0);\r\n        transform: translateX(0)\r\n    }\r\n}\r\n\r\n@keyframes mmFPAcMi2dF_q3dA8fTW {\r\n    0% {\r\n        -webkit-transform: translateX(0);\r\n        transform: translateX(0)\r\n    }\r\n\r\n    6.5% {\r\n        -webkit-transform: translateX(-6px) rotateY(-9deg);\r\n        transform: translateX(-6px) rotateY(-9deg)\r\n    }\r\n\r\n    18.5% {\r\n        -webkit-transform: translateX(5px) rotateY(7deg);\r\n        transform: translateX(5px) rotateY(7deg)\r\n    }\r\n\r\n    31.5% {\r\n        -webkit-transform: translateX(-3px) rotateY(-5deg);\r\n        transform: translateX(-3px) rotateY(-5deg)\r\n    }\r\n\r\n    43.5% {\r\n        -webkit-transform: translateX(2px) rotateY(3deg);\r\n        transform: translateX(2px) rotateY(3deg)\r\n    }\r\n\r\n    50% {\r\n        -webkit-transform: translateX(0);\r\n        transform: translateX(0)\r\n    }\r\n}\r\n\r\n.tjwLgi40fZRSPZVuNJqO {\r\n    -webkit-animation-name: mmFPAcMi2dF_q3dA8fTW;\r\n    animation-name: mmFPAcMi2dF_q3dA8fTW;\r\n    -webkit-animation-timing-function: ease-in-out;\r\n    animation-timing-function: ease-in-out;\r\n    -webkit-animation-duration: 1s !important;\r\n    animation-duration: 1s !important;\r\n}\r\n\r\n@-webkit-keyframes bOb0vUSnQiL3wIYKw8tF {\r\n  from {\r\n    opacity: 0;\r\n    -webkit-transform: translate3d(10%, 0, 0);\r\n    transform: translate3d(10%, 0, 0);\r\n  }\r\n\r\n  to {\r\n    opacity: 1;\r\n    -webkit-transform: translate3d(0, 0, 0);\r\n    transform: translate3d(0, 0, 0);\r\n  }\r\n}\r\n@keyframes bOb0vUSnQiL3wIYKw8tF {\r\n  from {\r\n    opacity: 0;\r\n    -webkit-transform: translate3d(10%, 0, 0);\r\n    transform: translate3d(10%, 0, 0);\r\n  }\r\n\r\n  to {\r\n    opacity: 1;\r\n    -webkit-transform: translate3d(0, 0, 0);\r\n    transform: translate3d(0, 0, 0);\r\n  }\r\n}\r\n.l38a0A6T6zHFcZW3ie9X {\r\n  -webkit-animation-name: bOb0vUSnQiL3wIYKw8tF;\r\n  animation-name: bOb0vUSnQiL3wIYKw8tF;\r\n}\r\n@keyframes BOXlHwPt_8Z4jks0Uzp8 {\r\n    0% {\r\n        opacity: 0;\r\n        -webkit-transform: translate3d(-10%, 0, 0);\r\n        transform: translate3d(-10%, 0, 0)\r\n    }\r\n\r\n    to {\r\n        opacity: 1;\r\n        -webkit-transform: translateZ(0);\r\n        transform: translateZ(0)\r\n    }\r\n}\r\n\r\n.FV8kpMm5Qsiq6UZxAae0 {\r\n    -webkit-animation-name: BOXlHwPt_8Z4jks0Uzp8;\r\n    animation-name: BOXlHwPt_8Z4jks0Uzp8\r\n}\r\n\r\n.YlSjCI7NIjxZu9i3qaI0 {\r\n    -webkit-animation-name: UZRyS63xCe7qCZLLuM_m;\r\n    animation-name: UZRyS63xCe7qCZLLuM_m\r\n}\r\n",""]),l.locals={animate__animated:"AwmRHMFTDP8V4WJBxBx6",animate__headShake:"tjwLgi40fZRSPZVuNJqO",headShake:"mmFPAcMi2dF_q3dA8fTW",animate__fadeInRight:"l38a0A6T6zHFcZW3ie9X",fadeInRight:"bOb0vUSnQiL3wIYKw8tF",animate__fadeInLeft:"FV8kpMm5Qsiq6UZxAae0",fadeInLeft:"BOXlHwPt_8Z4jks0Uzp8",animate__fadeIn:"YlSjCI7NIjxZu9i3qaI0",fadeIn:"UZRyS63xCe7qCZLLuM_m"};const i=l}}]);