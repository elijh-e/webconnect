"use strict";(self.webpackChunkEunoia=self.webpackChunkEunoia||[]).push([[91],{637:(e,t,n)=>{var a=n(4836),r=n(5263);t.Z=void 0;var o=r(n(7294)),i=(0,a(n(2108)).default)(o.createElement("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}),"Done");t.Z=i},9805:(e,t,n)=>{var a=n(4836),r=n(5263);t.Z=void 0;var o=r(n(7294)),i=(0,a(n(2108)).default)(o.createElement("path",{d:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"}),"DoneAll");t.Z=i},2714:(e,t,n)=>{var a=n(4836),r=n(5263);t.Z=void 0;var o=r(n(7294)),i=(0,a(n(2108)).default)(o.createElement("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"}),"PermIdentity");t.Z=i},7134:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(7294),r=n(1120),o=n(2387);const i=(0,r.Z)({chatActions:{borderRadius:"5px",zIndex:25e4,display:"flex",flexDirection:"column",background:"#fff !important","& > div":{display:"flex"},"& div:first-child":{},"& > div:last-of-type":{flexDirection:"column","& > button":{padding:"12px 0 12px 15px",borderRadius:0,"& .MuiIconButton-label":{justifyContent:"flex-start"},"& > span > span.MuiTypography-root":{padding:"0 25px 0 15px",color:"#000"}}}}});function l({children:e,open:t,anchorReference:n,anchorPosition:r,transformOrigin:l,anchorEl:s,onClose:c,anchorOrigin:d}){const m=i();return void 0===r?a.createElement(o.ZP,{open:t,anchorEl:s,onClose:c,elevation:2,anchorOrigin:d||{vertical:"center",horizontal:"center"},transformOrigin:l||{vertical:"center",horizontal:"center"}},a.createElement("div",{className:m.chatActions},e)):a.createElement(o.ZP,{open:t,elevation:2,anchorReference:"anchorPosition",anchorPosition:r,onClose:c,anchorOrigin:d||{vertical:"center",horizontal:"center"},transformOrigin:l||{vertical:"center",horizontal:"center"}},a.createElement("div",{className:m.chatActions},e))}l.propTypes={};const s=l},3247:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(7294),r=n(1120),o=n(3084);const i=(0,r.Z)({root:{display:"flex",alignItems:"center",fontSize:".91rem",height:"20px","& > div":{marginLeft:"8px"}}}),l=function({children:e}){const t=i();return a.createElement("span",{className:t.root},e,a.createElement(o.Preloader,{use:o.ThreeDots,size:32,strokeWidth:12,strokeColor:"#6495ed",duration:800}))}},1061:(e,t,n)=>{n.d(t,{Z:()=>g});var a=n(7294),r=n(1120),o=n(8463),i=n(515),l=n(7812),s=n(9826),c=n(2005),d=n(6367),m=n(9585),p=n(5953),u=n(5076),h=n(9704);const f=(0,r.Z)({card:{boxShadow:"none",display:"flex",flexDirection:"column",height:"100%",width:"100%",background:"transparent",flexDirection:"column","& .MuiCardHeader-root":{background:i.Z.white,boxShadow:"-1px 1px 1px 0px #cbcbcb",marginLeft:5,height:"3.7rem",padding:"0 16px",position:"relative",zIndex:10,"& .MuiCardHeader-title":{fontWeight:"bold","& .MuiCardHeader-avatar":{marginRight:6}},"& .MuiCardHeader-content":{overflow:"hidden","& > span":{overflow:"hidden",whiteSpace:"nowrap",paddingInlineEnd:10,textOverflow:"ellipsis"}},"@media (max-width: 660px)":{marginLeft:0,padding:"0 16px 0 39px"}},"& .MuiCardHeader-action":{alignSelf:"center",marginTop:0},"& .MuiCardContent-root":{flex:1,overflowY:"scroll",overflowX:"hidden",position:"relative"},"& .MuiCardActions-root, .MuiCardContent-root":{padding:"0 10%","@media (max-width: 900px)":{padding:"0 2%"}},"& .MuiCardActions-spacing > :not(:first-child)":{margin:0},"& .MuiCardActions-root":{position:"relative",marginBottom:"1rem",paddingTop:".25rem",flexDirection:"column",alignItems:"stretch","& .MuiInputBase-root":{flex:1,background:i.Z.white,margin:0,padding:"11px 10px",boxShadow:"0 0 9px 0px #0000000d","& textarea":{height:"19px"}},"@media (max-width: 660px)":{marginBottom:".2rem"}},"& .MuiInputBase-inputMultiline":{overflowY:"scroll !important"}},starred:{position:"sticky",width:"98%",top:0,margin:"0 auto",zIndex:25,transition:".7s ease all","& .MuiCardHeader-title":{color:"#edb664"}},backBtn:{position:"absolute",top:"11px",padding:5,display:"none",zIndex:30,"@media (max-width: 660px)":{display:"block"}}}),g=({children:e})=>{const t=f(),n=(0,h.I0)(),r=(0,h.v9)((e=>e.groups.selectedGroup)),i=(0,d.x)();return a.createElement(o.Z,{className:t.card,style:{height:`${i}px`}},a.createElement(l.Z,{className:t.backBtn,onClick:()=>(n((0,p.r0)({})),(0,c.hu)(r)&&n((0,u.lr)({})),void(window.innerWidth<660&&n((0,m.T6)({parent:"leftPane",component:!0}))))},a.createElement(s.Z,{style:{color:"#959494"}})),e)}},9540:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(7294),r=n(4741),o=n(7812),i=n(7397),l=n(3910);const s=function({inputValue:e,sendMessage:t=(()=>{}),handleTextInput:n=(()=>{})}){return a.createElement(r.Z,{multiline:!0,placeholder:"Type your messages",onChange:({target:e})=>n(e.value),maxRows:4,value:e,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||e.ctrlKey||(e.preventDefault(),t())},minRows:0,endAdornment:a.createElement(i.Z,{position:"end",style:{height:"100%"}},a.createElement(o.Z,{onClick:t},a.createElement(l.Z,{color:"primary"})))})}},2482:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(7294),r=n(1120),o=n(2285),i=n(366),l=n(9704);const s=(0,r.Z)({replyHandel:{display:"flex",borderBottom:"1px solid #f1f1f1",justifyContent:"space-between",maxHeight:"100px",background:"#fdfdfd",width:"100%",zIndex:40,borderRadius:"10px 10px 0 0"},replyProps:{display:"flex",flexDirection:"column",padding:10,width:"inherit",borderLeft:"2px solid #d1803e",borderRadius:"inherit","& span:first-child":{marginBottom:2},"& span:last-of-type":{maxHeight:"200px",overflowY:"scroll"}}}),c=function({open:e,sender:t,message:n,closeReplyHandle:r,handleChatHighlight:c}){const{username:d,id:m}=(0,l.v9)((e=>e.account.account)),p=s();return a.createElement(o.Z,{in:e,direction:"up"},a.createElement("div",{className:p.replyHandel},e&&a.createElement(a.Fragment,null,a.createElement("div",{className:p.replyProps,onClick:c},a.createElement("span",{style:{color:"#ad39ad",fontWeight:"bold"}},t===d?"You":t),a.createElement("span",null," ",n," ")),a.createElement("div",null,a.createElement(i.Z,{onClick:r,style:{fontSize:"1.2rem",color:"#c55044",margin:7}})))))}},2091:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var a=n(7294),r=n(4697),o=n(9912),i=n(1907),l=n(7812),s=n(2318),c=n(6912),d=n(5477),m=n(282),p=n(3173),u=n(8442),h=n(2714),f=n(7168),g=n(1120),x=n(9704),v=n(6257),E=n(5953),y=n(6614),b=n(2005),Z=n(3268),w=(n(9234),n(9805)),C=n(637),S=n(515),k=n(173);function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},N.apply(this,arguments)}const I=(0,g.Z)({indexedChats:{display:"flex",flexDirection:"column"},dateNotice:{textAlign:"center",margin:"10px 0",position:"sticky",zIndex:20,top:"10px","& span:first-child":{fontSize:".83rem",padding:"3px 7px",background:S.Z.white,boxShadow:"0 0 2px 0px #00000021",borderRadius:"5px"}},chatWrapper:{display:"flex",position:"relative",alignItems:"flex-end",width:"100%",padding:"2px 0",transition:".6s ease all"},flexStart:{justifyContent:"flex-start",alignSelf:"flex-start",paddingLeft:".5rem"},flexEnd:{alignSelf:"flex-end",justifyContent:"flex-end"},fromAccount:{marginLeft:"1rem",background:"#727f93","& > span:last-of-type":{color:S.Z.white}},fromFriend:{marginRight:"1rem",background:S.Z.white},chatSingle:{maxWidth:"80%",whiteSpace:"pre-line",width:"auto",font:"message-box",borderRadius:"5px",boxShadow:"1px 1px 1px 0px #00000012",position:"relative","& > span":{padding:"4px 8px"}},isLast:{marginBottom:12},overflow:{maxHeight:"200px",overflowX:"hidden",whiteSpace:"pre-wrap",display:"block",whiteSpace:"pre-line"},reply:{background:S.Z.white,fontSize:".85rem",padding:"5px 0",borderBottom:"1px solid #efefef",borderLeft:"2px solid #ffb55c",borderRadius:"inherit",borderBottomLeftRadius:"0",borderBottomRightRadius:"0","& > span":{padding:"0 5px",display:"block"},"& > span:first-child":{paddingLeft:"6px",color:k.Z[500],paddingBottom:3,fontSize:".8rem",fontWeight:"bold"}},chatTime:{fontSize:".65rem",marginLeft:7,opacity:.9,position:"sticky",top:"100px",float:"right",bottom:"0"},deleted:{fontStyle:"italic",padding:"3px 7px",background:"#fffadd",borderRadius:"5px","& > span":{color:"#d96c6c !important"}},chatRead:{padding:"0 3px","& svg":{fontSize:".9rem"}},isRead:{color:"#6495ed"}}),z=({chat:e,isFirst:t,isLast:n})=>{const r=I(),o=(0,x.I0)(),i=(0,x.v9)((e=>e.account.account.username));let l=!(!e.me&&e.sender!==i)||!(!e.me||e.sender!==i)&&"",s=l?r.fromAccount:r.fromFriend,c=l?r.flexEnd:r.flexStart,d={background:e.highlightChat?"rgb(0 137 255 / 14%)":"inherit"},m=()=>l?"rightBubble":"leftBubble";const[p,u]=a.useState(!1),[h,f]=a.useState(null),g=a.createRef(null),E=""===e.message,y=()=>e.sender!==i?e.sender:e.receiver!==i?e.receiver:void 0;a.useEffect((()=>{g.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}),[e.highlightChat]);const Z=t=>{o((0,v.zU)({chat:e,pos:JSON.stringify(t.getBoundingClientRect())}))},S=e=>{if(E)return!1;Z(e)},k=e=>{if(E)return!1;e.preventDefault(),Z(e.target)};return a.createElement("div",{className:[r.chatWrapper,c,t&&r.isFirst,n&&r.isLast].join(" "),style:d,ref:g},E?a.createElement("div",{className:[s,r.deleted].join(" ")},a.createElement("span",{className:r.deleted}," Deleted ")):e.reply.open?a.createElement(a.Fragment,null,a.createElement("div",{className:[s,r.chatSingle,t&&m(),"reply"].join(" ")},a.createElement("div",{className:r.reply,onClick:()=>{""!==e.reply.message&&(()=>{o((0,v.Wh)({chatId:e.reply.chatId,friendsName:y(),show:!0})),clearTimeout(h);let t=setTimeout((()=>{o((0,v.Wh)({chatId:e.reply.chatId,friendsName:y(),show:!1}))}),1500);f(t)})()}},a.createElement("span",null," ",e.reply.sender===i?"You":e.reply.sender," "),""!==e.reply.message?a.createElement("span",{className:r.overflow}," ",e.reply.message," "):a.createElement("div",{className:[s,r.deleted].join(" ")},a.createElement("span",{className:r.deleted}," Deleted "))),a.createElement("span",{className:[r.chat,r.overflow].join(" "),onClick:({target:t})=>{(0,b.hu)(e.chatId)&&S(t)},onContextMenu:k},e.message,a.createElement("span",{className:r.chatTime}," ",e.timestamp.time," "))),l&&a.createElement("span",{className:r.chatRead},e.read?a.createElement(w.Z,{className:r.isRead}):a.createElement(C.Z,null))):a.createElement(a.Fragment,null,a.createElement("div",{className:[s,r.chatSingle,t&&m()].join(" ")},a.createElement("span",{className:[r.chat,r.overflow].join(" "),onClick:({target:t})=>{(0,b.hu)(e.chatId)&&S(t)},onContextMenu:k},e.message,a.createElement("span",{className:r.chatTime}," ",e.timestamp.time," "))),l&&a.createElement("span",{className:r.chatRead},e.read?a.createElement(w.Z,{className:r.isRead}):a.createElement(C.Z,null))))};function R(e={sender:""}){return e.sender}const M=({chat:e})=>{const t=I(),n=(new Date).toDateString().slice(0,-5),r=e.chats.length;return a.createElement("div",null,a.createElement("header",{className:t.dateNotice},a.createElement("span",null," ",e.day===n?"Today":e.day," ")),a.createElement("div",{className:t.indexedChats},e.chats.length>0&&e.chats.map(((t,n)=>{let o=R(e.chats.at(n+1)),i=R(e.chats.at(n-1)),l=t.sender||"",s={isFirst:!1,isLast:!1};return 0===n&&(s.isFirst=!0),n===r-1&&(s.isLast=!0),i!==l&&(s.isFirst=!0),o!==l&&(s.isLast=!0),a.createElement(z,N({key:t.chatId,chat:t},s))}))))},T=({chats:e})=>{const t=I();let n=[],r=[];return e.forEach((e=>{-1===n.findIndex((t=>t===e.timestamp.day))&&n.push(e.timestamp.day)})),n.forEach((t=>{const n=e.filter((e=>e.timestamp.day===t));r.push({day:t,chats:n})})),a.createElement(a.Fragment,null,a.createElement("div",{className:t.chats},r.length>0&&r.map(((e,t)=>a.createElement(M,{key:t,chat:e})))))};var L=n(6426),D=n(2482),O=n(9540),j=n(1061),B=n(7134),H=n(3247);function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},P.apply(this,arguments)}const F=(0,g.Z)({emoji:{fill:"#363636",cursor:"pointer"},error:{position:"fixed",zIndex:"999",right:"10px",bottom:"50px"},snackbar:{transform:"none"},noChats:{position:"absolute",bottom:"1rem",left:"10%",textAlign:"center",width:"80%",textShadow:"1px 1px 1px #eee",color:"#68431d"},bottomSnackbar:{bottom:"15%","& .MuiSnackbarContent-message":{"& .MuiTypography-body1":{marginLeft:10},display:"flex",alignItems:"center"}},codeEle:{borderRadius:"4px",display:"inline-flex",background:"#ffffff47",alignItems:"center",justifyContent:"center",padding:"0 6px"}});function W(e){F();const[t,n]=a.useState(10);return a.useEffect((()=>{const e=setInterval((()=>{n((e=>e+10))}),200);return()=>{clearInterval(e)}}),[]),a.createElement(a.Fragment,null,a.createElement(d.Z,{variant:"determinate",value:t}),a.createElement(s.Z,{component:"span"}," ",e.action," "))}const A=({friend:e,typingStatus:t,onlineStatus:n,lastSeen:d})=>{const g=F(),w=(0,x.I0)(),{username:C,id:S}=(0,x.v9)((e=>e.account.account)),k=((0,x.v9)((e=>e.components.profile)),(0,x.v9)((e=>e.other.currentSelectedUser)),(0,x.v9)((e=>e.account.account.online))),N=(0,x.v9)((e=>e.chat.selectedChat)),[I,z]=a.useState(null),{pendingDelete:R,starredChat:M,reply:A,showProfile:V,inputValue:U,scrollPos:Y}=e.actionValues,[K,$]=a.useState(!1),[J,X]=a.useState(null),[q,G]=a.useState(!1),[Q,_]=a.useState(null),[ee,te]=a.useState(null),ne=a.createRef(null),[ae,re]=a.useState(!1),[oe,ie]=a.useState({}),[le,se]=a.useState("");a.useEffect((()=>{se(n?"online":d?`last seen ${(0,b.xq)(d)}`:"")}),[n]),a.useEffect((()=>{const t=e.messages.at(-1);t&&w((0,y.IJ)({lastChat:t,username:e.username}))}),[e.messages]),a.useEffect((()=>{if((0,b.hu)(R)){clearTimeout(I);let t=setTimeout((()=>{function t(t){(0,Z.Z)(t,{deletedBy:C,friendsName:e.username,chatId:R.chatId,sender:R.sender})}C===R.sender?t("deleteChatForAll"):C!==R.sender&&t("deleteChatForOne"),w((0,v.Rm)({friendsName:e.username,chatId:R.chatId})),A.open&&w((0,v.VS)({open:!1,friendsName:e.username}))}),2e3);z(t)}}),[R]);const ce=t=>{if(!n)return!1;(0,Z.Z)("userIsTyping",{typing:t,selectedUser:e.username,user:C}),re(t)},de=()=>{w((0,v.VS)({open:!1,friendsName:e.username}))},me=e=>w((0,E.Pc)(e));a.useEffect((()=>{(0,b.hu)(N)&&ie(JSON.parse(N.pos))}),[N]);const pe=()=>{w((0,v.zU)({}))},ue=()=>w((0,v.$l)(!0));return a.createElement(j.Z,null,a.createElement(r.Z,{avatar:a.createElement("div",{onClick:ue},a.createElement(L.Z,{username:e.username,badge:!1,style:{fontSize:"1.1rem"}})),action:a.createElement(l.Z,{onClick:ue},a.createElement(h.Z,null)),title:a.createElement("span",{onClick:ue}," ",e.username," "),subheader:t?a.createElement(H.Z,null):le}),a.createElement(o.Z,{ref:ne,className:g.contents},e.messages.length>0?a.createElement(T,{chats:e.messages}):a.createElement("div",{className:g.noChats}," ","Start the conversation by saying Hi"," "),a.createElement(c.Z,{className:[g.bottomSnackbar,g.snackbar].join(" "),anchorOrigin:{vertical:"bottom",horizontal:"center"},message:a.createElement(W,{action:"Deleting..."}),open:(0,b.hu)(R),action:a.createElement(m.Z,{onClick:()=>(w((0,v.N6)({friendsName:e.username})),void clearTimeout(I)),style:{color:"#ffc4cf"}}," UNDO ")}),(0,b.hu)(N)&&(0,b.hu)(oe)&&a.createElement(B.Z,{open:(0,b.hu)(N),onClose:pe,anchorPosition:{top:oe.top,left:oe.left},anchorOrigin:{vertical:"bottom",horizontal:N.chat.sender===C?"left":"right"},transformOrigin:{vertical:"top",horizontal:N.chat.sender===C?"right":"left"}},a.createElement("div",null,a.createElement(l.Z,{onClick:()=>{w((0,v.VS)({username:C,open:!0,chatId:N.chat.chatId,sender:N.chat.sender,friendsName:e.username})),pe()}},a.createElement(f.Z,null),a.createElement(s.Z,{component:"span"}," Reply ")),a.createElement(l.Z,{onClick:()=>{navigator.clipboard.writeText(N.chat.message),pe()}},a.createElement(p.Z,{style:{color:"#958783"}}),a.createElement(s.Z,{component:"span"}," Copy ")),a.createElement(l.Z,{onClick:()=>{(()=>{if(!k)return me({open:!0}),!1;w((0,v.W$)({friendsName:e.username,chat:N.chat}))})(),pe()}},a.createElement(u.Z,{style:{color:"#ed143d"}}),a.createElement(s.Z,{component:"span"}," Delete "))))),a.createElement(i.Z,{className:g.contents},a.createElement(D.Z,P({},A,{closeReplyHandle:de,handleChatHighlight:()=>{w((0,v.Wh)({chatId:A.chatId,friendsName:e.username,show:!0})),clearTimeout(ee);let t=setTimeout((()=>{w((0,v.Wh)({chatId:A.chatId,friendsName:e.username,show:!1}))}),1500);te(t)}})),a.createElement(O.Z,{inputValue:U,handleTextInput:t=>{clearTimeout(Q),w((0,v.un)({username:e.username,value:t}));const n=setTimeout((async()=>{ce(!1)}),1500);ae||ce(!0),_(n)},sendMessage:()=>{const t=U.trim();if(""===t.replaceAll(" ",""))return!1;if(ae&&ce(!1),!k)return me({open:!0}),!1;const n=(new Date).getTime(),a={receiver:e.username,sender:C,lastSent:n,message:{message:t,chatId:n,sender:C,read:!1,receiver:e.username,timestamp:(0,b.hi)(),reply:A}};(0,Z.Z)("sentChat",a),w((0,v.KF)(a)),A.open&&de(),w((0,v.un)({username:e.username,value:""}))}})))}},6140:(e,t,n)=>{n.d(t,{W:()=>a,Z:()=>r});const a=(0,n(3992).io)("/user",{autoConnect:!1,forceNew:!0});function r(e){const{token:t,username:n}=e;a.auth={token:t,username:n},a.connect()}},3268:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(6140);function r(e,...t){var n,r;n=e,r=t,a.W.emit(n,...r)}}}]);