"use strict";(self.webpackChunkwebconnect=self.webpackChunkwebconnect||[]).push([[587],{2835:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(7294),r=n(1120),l=n(5258),o=n(8358),c=n(515);const i=(0,r.Z)((e=>({root:{flexGrow:1,height:"3.7rem",padding:"10px 0",height:"4.5rem",background:c.Z.white,top:0,boxShadow:"-3px 1px 3px 0px #e5e5e5","& .MuiToolbar-root":{padding:0,height:"100%"}},menuButton:{marginRight:e.spacing(2)}}))),s=({children:e,styles:t})=>{const n=i();return a.createElement(l.Z,{position:"sticky",className:n.root,style:t},a.createElement(o.Z,{variant:"dense"},e))}},1867:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(7294),r=n(1120),l=n(4741);const o=(0,r.Z)({searchbar:{width:"80%",borderBottom:"1px solid #e3e3e3",padding:"5px 15px",margin:"0 9px","& .MuiInputBase-input":{fontSize:".9rem",color:"#0d2c66"},"& .MuiInputAdornment-positionStart":{"& p":{color:"#63718d"}}}}),c=({input:e,onChange:t,placeholder:n="Search",classNames:r=[]})=>{const c=o();return a.createElement(l.Z,{className:[c.searchbar,...r].join(" "),placeholder:n,type:"text",value:e,onChange:({target:e})=>{t(e.value)}})}},1587:(e,t,n)=>{n.r(t),n.d(t,{default:()=>oe});var a=n(7294),r=n(9704),l=n(2318),o=n(4593),c=n(1120),i=n(5639),s=n(7812),m=n(4170),u=n(6856),d=n(9525),p=n(7212),h=n(6083),g=n(282),E=n(9302),f=n(4077),Z=n(4710),v=n(3637),y=n(650),C=n(87),b=n(5891),S=n(8513),x=n(7561),k=n(2835),w=n(1867),I=n(637),M=n(5984),N=n(8442),T=n(3817),D=n(9805),O=n(5757),L=n(998),z=n(6869),j=n(6426),A=n(7134),P=n(3247),R=n(6614),F=n(9585),G=n(5953),W=n(6257),_=n(5076),B=n(2005),U=n(3268),Y=n(5395),H=n(9008);const K=(0,c.Z)({listItem:{position:"relative",padding:12,"&.MuiListItem-root.Mui-selected":{backgroundColor:"#efefef"},"&:hover":{backgroundColor:"#e3e3e34d"},"& .MuiAvatar-root":{width:45,height:45},"& .MuiMenu-list":{padding:"2px 0"},"& .MuiListItemText-root":{marginLeft:".3rem","& .MuiListItemText-secondary":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",paddingInlineEnd:10,marginTop:2}}},chatMisc:{display:"flex",alignItems:"flex-end",flexDirection:"column",justifyContent:"center",fontSize:".8rem",whiteSpace:"nowrap"},lastSent:{marginBottom:6,textAlign:"right",color:"#53555e"},chatProps:{alignItems:"center",display:"flex",justifyContent:"center","& > svg":{fontSize:"1.3rem",color:"#a2aab9"}},unread:{minWidth:17,minHeight:17,background:"#6495ed",borderRadius:"100%",color:"#fff",marginLeft:6,textAlign:"center"},typingStatus:{color:"#6495ed"},lastChat:{color:"initial",fontSize:".9rem","& span":{color:" #9d9d9d"}},isRead:{color:"#6495ed"},chatRead:{"& svg":{fontSize:".8rem",position:"relative",top:2}}}),$=function({isStarred:e,username:t,unread:n,visible:o,lastChat:c,chatType:i,isOnline:m,typing:u,pId:d,groupIsSelected:p,isFetched:h,isCurrentSelectedUser:g}){const{username:E,id:f}=(0,r.v9)((e=>e.account.account)),Z=K(),v=(0,r.I0)(),[y,C]=a.useState(!1),[b,S]=a.useState(null),[x,k]=a.useState("");a.useEffect((()=>{(0,B.hu)(c)&&k((0,B.Co)(c.chatId,c.timestamp))}),[c]);const w=()=>{p&&v((0,_.lr)({})),v((0,G.r0)({username:t})),window.innerWidth<660&&v((0,F.T6)({parent:"leftPane",component:!1}))},$=e=>{C(!1),S(null)};return a.createElement(a.Fragment,null,a.createElement(L.Z,{button:!0,className:Z.listItem,selected:g||y,onClick:e=>{e.preventDefault(),g||((0,B.hu)(n)&&(v((0,R.JZ)(t)),(0,U.Z)("chatIsRead",{sender:t,receiver:E})),h?w():(0,Y.W)({username:t},(e=>{v((0,W.yp)(e)),v((0,G.m1)(t)),w()})))},onContextMenu:e=>(e.preventDefault(),C(!0),S(e.currentTarget),!1),style:{display:o?"flex":"none"}},a.createElement(z.Z,null,a.createElement(j.Z,{username:t,badge:m})),a.createElement(O.Z,{primary:a.createElement(l.Z,{component:"h6"}," ",t),secondary:u?a.createElement(P.Z,null):a.createElement("span",{className:Z.lastChat},c.sender===E&&a.createElement("span",{className:Z.chatRead},c.read?a.createElement(D.Z,{className:Z.isRead}):a.createElement(I.Z,null)),a.createElement("span",null," ",c.message," "))}),a.createElement("div",{className:Z.chatMisc},a.createElement("span",{className:Z.lastSent,style:{color:(0,B.hu)(n)?"#6495ed":"initial"}},x),a.createElement("span",{className:Z.chatProps},e.value&&a.createElement(M.Z,null),(0,B.hu)(n)&&a.createElement("span",{className:Z.unread}," ",n.length," ")))),a.createElement(A.Z,{open:y,anchorEl:b,onClose:$,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"}},a.createElement("div",null,a.createElement(s.Z,{onClick:()=>{(()=>{const n={value:!e.value,date:Date.now()};(0,H.YR)({username:t,starred:n}),v((0,R.hP)({friendsName:t,isStarred:n}))})(),$()}},e.value?a.createElement(M.Z,{style:{color:"#6495ed"}}):a.createElement(T.Z,{style:{color:"#6495ed"}}),a.createElement(l.Z,{component:"span"}," ",(e.value?"Unstar":"Star")+" conversation")),a.createElement(s.Z,{onClick:()=>{v((0,R.Wk)({username:t})),$()}},a.createElement(N.Z,{style:{color:"#ff6a6a"}}),a.createElement(l.Z,{component:"span"}," Clear conversation ")))))};var q=n(2792),J=n(3901),Q=n(8312);const V=(0,c.Z)({listItem:{position:"relative",padding:12,"&.MuiListItem-root.Mui-selected":{backgroundColor:"#efefef"},"&:hover":{backgroundColor:"#e3e3e34d"},"& .MuiAvatar-root":{width:45,height:45},"& .MuiMenu-list":{padding:"2px 0"},"& .MuiListItemText-root":{"& > h6, & > p":{marginLeft:".3rem",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",paddingInlineEnd:10,marginTop:2}}},chatMisc:{display:"flex",alignItems:"flex-end",flexDirection:"column",justifyContent:"center",fontSize:".8rem",whiteSpace:"nowrap"},lastSent:{marginBottom:6,textAlign:"right",color:"#53555e"},chatProps:{alignItems:"center",display:"flex",justifyContent:"center","& > svg":{fontSize:"1.3rem",color:"#a2aab9"}},unread:{minWidth:17,minHeight:17,background:"#6495ed",borderRadius:"100%",color:"#fff",marginLeft:6,textAlign:"center"},lastGroupChat:{"& > span:first-child":{color:"#d99a5a",fontWeight:"bold"},"& > span:last-of-type":{color:"#9d9d9d"}},textPrimary:{color:"#9d9d9d"}}),X=function({_id:e,name:t,isStarred:n,typing:o,visible:c,unread:i,lastChat:m,isNull:u,userIsSelected:d,isCurrentSelectedGroup:p,isFetched:h}){const{id:g,username:E}=(0,r.v9)((e=>e.account.account)),f=V(),Z=(0,r.I0)(),[v,y]=a.useState(!1),[C,b]=a.useState(null),[S,x]=a.useState(),[k,w]=a.useState(""),[I,D]=a.useState("");a.useEffect((()=>{(0,B.hu)(m)&&w((0,B.Co)(m.chatId,m.timestamp))}),[m]);const j=e=>{y(!1),b(null)},W=()=>{Z((0,_.lr)({_id:e})),d&&Z((0,G.r0)({})),window.innerWidth<660&&Z((0,F.T6)({parent:"leftPane",component:!1}))};return a.createElement(a.Fragment,null,a.createElement(L.Z,{button:!0,className:f.listItem,onClick:()=>{u||p||((0,B.hu)(i)&&((0,Q.Wk)({groupId:e}),Z((0,R.l9)({_id:e,field:{unread:[]}}))),h?W():(0,Q.eC)({groupId:e},(t=>{Z((0,_.ED)(t)),Z((0,_.K2)(e)),W()})))},selected:p||v,onContextMenu:e=>(e.preventDefault(),y(!0),b(e.currentTarget),!1),style:{display:c?"flex":"none"}},a.createElement(z.Z,null,a.createElement(J.Z,null,a.createElement(q.Z,null))),a.createElement(O.Z,{primary:a.createElement(l.Z,{component:"h6"}," ",t),secondary:a.createElement("span",null,o.some((e=>e.typing))&&a.createElement(P.Z,null,o.map((e=>e.username)).join(", ")),(0,B.hu)(m)&&!o.some((e=>e.typing))&&a.createElement("span",{className:[f.lastGroupChat].join(" ")},m.type&&"alert"===m.type?m.message.split(" ").map((e=>e.replaceAll(E,"You"))).join(" "):a.createElement(a.Fragment,null,a.createElement("span",null,m.sender.replaceAll(E,"You"),":"),a.createElement("span",null,"Â ",m.message," "))))}),a.createElement("div",{className:f.chatMisc},a.createElement("span",{className:f.lastSent,style:{color:(0,B.hu)(i)?"#6495ed":"initial"}},k),a.createElement("span",{className:f.chatProps},n.value&&a.createElement(M.Z,null),(0,B.hu)(i)&&a.createElement("span",{className:f.unread}," ",i.length," ")))),a.createElement(A.Z,{open:v,anchorEl:C,onClose:j,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"}},a.createElement("div",null,a.createElement(s.Z,{onClick:()=>{(()=>{const t={value:!n.value,date:Date.now()};(0,Q.eb)({groupId:e,body:t}),Z((0,R.eb)({_id:e,starredObj:t}))})(),j()}},n.value?a.createElement(M.Z,{style:{color:"#6495ed"}}):a.createElement(T.Z,{style:{color:"#6495ed"}}),a.createElement(l.Z,{component:"span"}," ",(n.value?"Unstar":"Star")+" group")),a.createElement(s.Z,{onClick:()=>{Z((0,R.iY)(e)),j()}},a.createElement(N.Z,{style:{color:"#ff6a6a"}}),a.createElement(l.Z,{component:"span"}," Exit group ")))))};var ee=n(4898),te=n(2788);function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ne.apply(this,arguments)}const ae=(0,c.Z)({add:{fontSize:"2.9rem !important"},menu:{"& div":{top:"75px !important"},"& .MuiMenuItem-root":{paddingLeft:"10px"},"& svg":{marginRight:11,color:"#57565c",fontSize:"1.5rem"},"& .MuiListItemIcon-root":{minWidth:40}},speedDial:{alignItems:"flex-end",position:"sticky",bottom:"1rem",right:"1rem","& .MuiFab-primary":{background:"cornflowerblue",color:"#fff"},"& .MuiSpeedDialAction-staticTooltipLabel":{color:"#fff",background:"#739be3",whiteSpace:"nowrap"},"& .MuiSpeedDialAction-fab":{backgroundColor:"#739be3",color:"#fff"}}}),re=te.ZP.div`
	display: flex;
	flex-direction: column;
	padding: 30px 10px 0 10px;
	justify-content: center;
	align-items: center;

	em {
		margin: 23px 0;
		color: #702828;
	}

	img {
		width: 90%;
	}
`,le=({})=>a.createElement(v.Z,{in:!0},a.createElement(re,null,a.createElement("em",null,"Your chat history is currently empty"),a.createElement("img",{src:ee.Z,alt:"Quick chat"}))),oe=({className:e})=>{(0,r.v9)((e=>e.components.stack.recentChats));const t=(0,r.v9)((e=>e.recentChats.chatToBeCleared)),n=(0,r.v9)((e=>e.recentChats.groupToBeDeleted)),c=(0,r.v9)((e=>e.recentChats.input)),{id:I,username:M}=(0,r.v9)((e=>e.account.account)),{useEffect:N,useState:T}=a,D=ae(),O=(0,r.I0)(),[L,z]=T(null),j=Boolean(L),A=()=>{z(null)},P=(0,r.v9)((e=>e.other.currentSelectedUser)),Y=(0,r.v9)((e=>e.groups.selectedGroup)),K=(0,r.v9)((e=>e.recentChats.recentChats)),q=(0,r.v9)((e=>e.recentChats.showRecentUsersLoader)),J=(0,r.v9)((e=>e.other.fetched)),V=(0,r.v9)((e=>e.socketActivity.onlineUsers)),ee=(0,r.v9)((e=>e.groups.fetchedGroups)),[te,re]=T(!1),[oe,ce]=T(!1),ie=e=>{O((0,F.T6)(e))},se=()=>{(0,B.hu)(t)&&O((0,R.Wk)({})),(0,B.hu)(n)&&O((0,R.iY)({}))},me=()=>{re(!te)};return a.createElement("section",{className:[D.recentChats,e].join(" "),onMouseEnter:()=>ce(!0),onMouseLeave:()=>ce(!1)},a.createElement(k.Z,{styles:{}},a.createElement(s.Z,{onClick:()=>{A(),ie({parent:"stack",component:"settings"})}},a.createElement(b.Z,{style:{color:"#6680af"}})),a.createElement(w.Z,{input:c,placeholder:"Search for users and groups",onChange:e=>{var t;t=e,O((0,R.gI)(t))}}),a.createElement(s.Z,{onClick:e=>{z(e.target)},style:{background:j&&"#0000000a"}},a.createElement(S.Z,null)),a.createElement(o.Z,{open:j,anchorOrigin:{horizontal:"right",vertical:"top"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:A,anchorEl:L,className:D.menu},a.createElement(i.Z,{onClick:()=>{A(),ie({parent:"stack",component:"activeUsers"})}},a.createElement(y.Z,null),a.createElement(l.Z,{variant:"inherit"}," Network ")))),0===K.length?a.createElement(le,null):a.createElement("div",{className:D.userslist},q?a.createElement(x.Z,null):K.length>0&&K.map(((e,r)=>{if(e.chatType&&"group"===e.chatType){const t=()=>!!ee.some((t=>t===e._id)),l=()=>Y._id===e._id||!(!(0,B.hu)(n)||n._id!==e._id);return a.createElement(X,ne({},e,{key:r,userIsSelected:!!(0,B.hu)(P),isFetched:t(),isCurrentSelectedGroup:l()}))}{let n=()=>!(!(0,B.hu)(P)||P.username!==e.username)||!(!(0,B.hu)(t)||t.username!==e.username),l=()=>!!J.some((t=>t.username===e.username)),o=()=>{let t=V.find((t=>t.username===e.username));return!(void 0===t||!t.online)};return a.createElement($,ne({},e,{key:r,groupIsSelected:!!(0,B.hu)(Y),isOnline:o(),isFetched:l(),isCurrentSelectedUser:n()}))}}))),(0,B.hu)(t)&&a.createElement(m.Z,{open:(0,B.hu)(t),onClose:se,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},a.createElement(h.Z,{id:"alert-dialog-title"},"Clear conversation"),a.createElement(d.Z,null,a.createElement(p.Z,{id:"alert-dialog-description"},`This action will permanently clear your entire chat history with ${t.username}. Continue?`)),a.createElement(u.Z,null,a.createElement(g.Z,{onClick:se,style:{color:"red"}},"Cancel"),a.createElement(g.Z,{color:"primary",autoFocus:!0,onClick:()=>{(0,B.hu)(J.find((e=>e===t.username)))&&O((0,G.EG)(t.username)),P.username===t.username&&O((0,G.r0)({})),(0,H.Pq)({username:t.username}),O((0,R.c6)(t.username)),O((0,W.VB)(t.username)),se()}},"Delete"))),(0,B.hu)(n)&&a.createElement(m.Z,{open:(0,B.hu)(n),onClose:se,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},a.createElement(h.Z,{id:"alert-dialog-title"},"Exit group"),a.createElement(d.Z,null,a.createElement(p.Z,{id:"alert-dialog-description"},"This action will permanently clear your entire chat history with the \n seleceted group and you'll no longer be a member of the group. Continue?")),a.createElement(u.Z,null,a.createElement(g.Z,{onClick:se,style:{color:"red"}},"Cancel"),a.createElement(g.Z,{color:"primary",autoFocus:!0,onClick:()=>{(0,U.Z)("removeGroupUser",{_id:n,username:M,message:{type:"alert",chatId:(new Date).getTime(),message:`${M} left the group`,timestamp:(0,B.hi)()}}),(0,Q.Ln)({groupId:n}),O((0,R.pK)(n)),O((0,_.iE)(n)),se()}},"Delete"))),a.createElement(v.Z,{in:oe||navigator.maxTouchPoints>0},a.createElement(E.Z,{ariaLabel:"SpeedDial openIcon",className:D.speedDial,icon:a.createElement(f.Z,{openIcon:a.createElement(C.Z,null)}),onClose:me,onOpen:me,open:te},a.createElement(Z.Z,{icon:a.createElement(C.Z,null),tooltipTitle:"Create new group",tooltipOpen:!0,onClick:()=>{me(),O((0,F.T6)({parent:"stack",component:"newGroup"}))}}))))}}}]);