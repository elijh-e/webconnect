"use strict";(self.webpackChunkwebconnect=self.webpackChunkwebconnect||[]).push([[153],{2792:(e,t,n)=>{var a=n(4836),r=n(5263);t.Z=void 0;var l=r(n(7294)),o=(0,a(n(2108)).default)(l.createElement("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"Group");t.Z=o},8405:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(7294),r=n(1120),l=n(5258),o=n(8358),c=n(515);const i=(0,r.Z)((e=>({root:{flexGrow:1,height:"3.7rem",padding:"10px 0",height:"4.5rem",background:c.Z.white,top:0,boxShadow:"-3px 1px 3px 0px #e5e5e5","& .MuiToolbar-root":{padding:0,height:"100%"}},menuButton:{marginRight:e.spacing(2)}}))),s=({children:e,styles:t})=>{const n=i();return a.createElement(l.Z,{position:"sticky",className:n.root,style:t},a.createElement(o.Z,{variant:"dense"},e))}},6147:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(7294),r=n(1120),l=n(4741);const o=(0,r.Z)({searchbar:{width:"80%",borderBottom:"1px solid #e3e3e3",padding:"5px 15px",margin:"0 9px","& .MuiInputBase-input":{fontSize:".9rem",color:"#0d2c66"},"& .MuiInputAdornment-positionStart":{"& p":{color:"#63718d"}}}}),c=({input:e,onChange:t,placeholder:n="Search",classNames:r=[]})=>{const c=o();return a.createElement(l.Z,{className:[c.searchbar,...r].join(" "),placeholder:n,type:"text",value:e,onChange:({target:e})=>{t(e.value)}})}},9100:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(7294),r=n(3901),l=n(9009),o=n(1120);const c=["#6495ed","#cb64ed","#64ed94","#7364ed","#64a1ed","#edb664","#eda364","#64c7ed","#ed7d64","#ed6471"],i=(0,o.Z)({avatar:{fontWeight:"bold",textTransform:"uppercase"},offline:{"& .MuiBadge-dot":{boxShadow:"0px 0px 0px 2px #fff"}},online:{"& .MuiBadge-dot":{background:"#8ae76b",boxShadow:"0px 0px 0px 2px #fff"}}}),s=({props:e,style:t,firstAndLastName:n})=>{const o=i();return a.createElement(l.Z,{variant:"dot",className:o.online,overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"}},a.createElement(r.Z,{className:[o.avatar,e.className].join(" "),style:t},n))},m=e=>{const t=i(),n={background:c[e.username.split(" ").join("").length-1]||"#ed6471",...e.style};let l=e.username.trimEnd();l=l.trimStart();let o="",m=l.split(" ");return m.length<=2?m.forEach((e=>o+=e[0])):o=m[0][0]+m[m.length-1][0],e.badge?a.createElement(s,{props:e,style:n,firstAndLastName:o}):a.createElement(r.Z,{className:[e.className,t.avatar].join(" "),style:n},o)}},6153:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ue});var a=n(7294),r=n(9704),l=n(2318),o=n(4593),c=n(1120),i=n(5639),s=n(7812),m=n(4170),u=n(6856),d=n(9525),p=n(7212),h=n(6083),g=n(282),f=n(9302),E=n(4077),v=n(4710),Z=n(3637),y=n(650),x=n(87),b=n(5891),C=n(8513),S=n(7561),k=n(8405),w=n(6147),I=n(637),M=n(5984),N=n(8442),z=n(3817),T=n(9805),O=n(5757),D=n(998),L=n(6869),j=n(9100),P=n(2387);const A=(0,c.Z)({chatActions:{borderRadius:"5px",zIndex:25e4,display:"flex",flexDirection:"column",background:"#fff !important","& > div":{display:"flex"},"& div:first-child":{},"& > div:last-of-type":{flexDirection:"column","& > button":{padding:"12px 0 12px 15px",borderRadius:0,"& .MuiIconButton-label":{justifyContent:"flex-start"},"& > span > span.MuiTypography-root":{padding:"0 25px 0 15px",color:"#000"}}}}});function R({children:e,open:t,anchorReference:n,anchorPosition:r,transformOrigin:l,anchorEl:o,onClose:c,anchorOrigin:i}){const s=A();return void 0===r?a.createElement(P.ZP,{open:t,anchorEl:o,onClose:c,elevation:2,anchorOrigin:i||{vertical:"center",horizontal:"center"},transformOrigin:l||{vertical:"center",horizontal:"center"}},a.createElement("div",{className:s.chatActions},e)):a.createElement(P.ZP,{open:t,elevation:2,anchorReference:"anchorPosition",anchorPosition:r,onClose:c,anchorOrigin:i||{vertical:"center",horizontal:"center"},transformOrigin:l||{vertical:"center",horizontal:"center"}},a.createElement("div",{className:s.chatActions},e))}R.propTypes={};const W=R;var B=n(3084);const G=(0,c.Z)({root:{display:"flex",alignItems:"center",fontSize:".91rem",height:"20px","& > div":{marginLeft:"8px"}}}),F=function({children:e}){const t=G();return a.createElement("span",{className:t.root},e,a.createElement(B.Preloader,{use:B.ThreeDots,size:32,strokeWidth:12,strokeColor:"#6495ed",duration:800}))};var _=n(6614),U=n(9585),Y=n(5953),V=n(6257),H=n(5076),K=n(2005),$=n(3268),q=n(5395),J=n(9008);const Q=(0,c.Z)({listItem:{position:"relative",padding:12,"&.MuiListItem-root.Mui-selected":{backgroundColor:"#efefef"},"&:hover":{backgroundColor:"#e3e3e34d"},"& .MuiAvatar-root":{width:45,height:45},"& .MuiMenu-list":{padding:"2px 0"},"& .MuiListItemText-root":{marginLeft:".3rem","& .MuiListItemText-secondary":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",paddingInlineEnd:10,marginTop:2}}},chatMisc:{display:"flex",alignItems:"flex-end",flexDirection:"column",justifyContent:"center",fontSize:".8rem",whiteSpace:"nowrap"},lastSent:{marginBottom:6,textAlign:"right",color:"#53555e"},chatProps:{alignItems:"center",display:"flex",justifyContent:"center","& > svg":{fontSize:"1.3rem",color:"#a2aab9"}},unread:{minWidth:17,minHeight:17,background:"#6495ed",borderRadius:"100%",color:"#fff",marginLeft:6,textAlign:"center"},typingStatus:{color:"#6495ed"},lastChat:{color:"initial",fontSize:".9rem","& span":{color:" #9d9d9d"}},isRead:{color:"#6495ed"},chatRead:{"& svg":{fontSize:".8rem",position:"relative",top:2}}}),X=function({isStarred:e,username:t,unread:n,visible:o,lastChat:c,chatType:i,isOnline:m,typing:u,pId:d,groupIsSelected:p,isFetched:h,isCurrentSelectedUser:g}){const{username:f,id:E}=(0,r.v9)((e=>e.account.account)),v=Q(),Z=(0,r.I0)(),[y,x]=a.useState(!1),[b,C]=a.useState(null),[S,k]=a.useState("");a.useEffect((()=>{(0,K.hu)(c)&&k((0,K.Co)(c.chatId,c.timestamp))}),[c]);const w=()=>{p&&Z((0,H.lr)({})),Z((0,Y.r0)({username:t})),window.innerWidth<660&&Z((0,U.T6)({parent:"leftPane",component:!1}))},P=e=>{x(!1),C(null)};return a.createElement(a.Fragment,null,a.createElement(D.Z,{button:!0,className:v.listItem,selected:g||y,onClick:e=>{e.preventDefault(),g||((0,K.hu)(n)&&(Z((0,_.JZ)(t)),(0,$.Z)("chatIsRead",{sender:t,receiver:f})),h?w():(0,q.W)({username:t},(e=>{Z((0,V.yp)(e)),Z((0,Y.m1)(t)),w()})))},onContextMenu:e=>(e.preventDefault(),x(!0),C(e.currentTarget),!1),style:{display:o?"flex":"none"}},a.createElement(L.Z,null,a.createElement(j.Z,{username:t,badge:m})),a.createElement(O.Z,{primary:a.createElement(l.Z,{component:"h6"}," ",t),secondary:u?a.createElement(F,null):a.createElement("span",{className:v.lastChat},c.sender===f&&a.createElement("span",{className:v.chatRead},c.read?a.createElement(T.Z,{className:v.isRead}):a.createElement(I.Z,null)),a.createElement("span",null," ",c.message," "))}),a.createElement("div",{className:v.chatMisc},a.createElement("span",{className:v.lastSent,style:{color:(0,K.hu)(n)?"#6495ed":"initial"}},S),a.createElement("span",{className:v.chatProps},e.value&&a.createElement(M.Z,null),(0,K.hu)(n)&&a.createElement("span",{className:v.unread}," ",n.length," ")))),a.createElement(W,{open:y,anchorEl:b,onClose:P,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"}},a.createElement("div",null,a.createElement(s.Z,{onClick:()=>{(()=>{const n={value:!e.value,date:Date.now()};(0,J.YR)({username:t,starred:n}),Z((0,_.hP)({friendsName:t,isStarred:n}))})(),P()}},e.value?a.createElement(M.Z,{style:{color:"#6495ed"}}):a.createElement(z.Z,{style:{color:"#6495ed"}}),a.createElement(l.Z,{component:"span"}," ",(e.value?"Unstar":"Star")+" conversation")),a.createElement(s.Z,{onClick:()=>{Z((0,_.Wk)({username:t})),P()}},a.createElement(N.Z,{style:{color:"#ff6a6a"}}),a.createElement(l.Z,{component:"span"}," Clear conversation ")))))};var ee=n(2792),te=n(3901),ne=n(8312);const ae=(0,c.Z)({listItem:{position:"relative",padding:12,"&.MuiListItem-root.Mui-selected":{backgroundColor:"#efefef"},"&:hover":{backgroundColor:"#e3e3e34d"},"& .MuiAvatar-root":{width:45,height:45},"& .MuiMenu-list":{padding:"2px 0"},"& .MuiListItemText-root":{"& > h6, & > p":{marginLeft:".3rem",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",paddingInlineEnd:10,marginTop:2}}},chatMisc:{display:"flex",alignItems:"flex-end",flexDirection:"column",justifyContent:"center",fontSize:".8rem",whiteSpace:"nowrap"},lastSent:{marginBottom:6,textAlign:"right",color:"#53555e"},chatProps:{alignItems:"center",display:"flex",justifyContent:"center","& > svg":{fontSize:"1.3rem",color:"#a2aab9"}},unread:{minWidth:17,minHeight:17,background:"#6495ed",borderRadius:"100%",color:"#fff",marginLeft:6,textAlign:"center"},lastGroupChat:{"& > span:first-child":{color:"#d99a5a",fontWeight:"bold"},"& > span:last-of-type":{color:"#9d9d9d"}},textPrimary:{color:"#9d9d9d"}}),re=function({_id:e,name:t,isStarred:n,typing:o,visible:c,unread:i,lastChat:m,isNull:u,userIsSelected:d,isCurrentSelectedGroup:p,isFetched:h}){const{id:g,username:f}=(0,r.v9)((e=>e.account.account)),E=ae(),v=(0,r.I0)(),[Z,y]=a.useState(!1),[x,b]=a.useState(null),[C,S]=a.useState(),[k,w]=a.useState(""),[I,T]=a.useState("");a.useEffect((()=>{(0,K.hu)(m)&&w((0,K.Co)(m.chatId,m.timestamp))}),[m]);const j=e=>{y(!1),b(null)},P=()=>{v((0,H.lr)({_id:e})),d&&v((0,Y.r0)({})),window.innerWidth<660&&v((0,U.T6)({parent:"leftPane",component:!1}))};return a.createElement(a.Fragment,null,a.createElement(D.Z,{button:!0,className:E.listItem,onClick:()=>{u||p||((0,K.hu)(i)&&((0,ne.Wk)({groupId:e}),v((0,_.l9)({_id:e,field:{unread:[]}}))),h?P():(0,ne.eC)({groupId:e},(t=>{v((0,H.ED)(t)),v((0,H.K2)(e)),P()})))},selected:p||Z,onContextMenu:e=>(e.preventDefault(),y(!0),b(e.currentTarget),!1),style:{display:c?"flex":"none"}},a.createElement(L.Z,null,a.createElement(te.Z,null,a.createElement(ee.Z,null))),a.createElement(O.Z,{primary:a.createElement(l.Z,{component:"h6"}," ",t),secondary:a.createElement("span",null,o.some((e=>e.typing))&&a.createElement(F,null,o.map((e=>e.username)).join(", ")),(0,K.hu)(m)&&!o.some((e=>e.typing))&&a.createElement("span",{className:[E.lastGroupChat].join(" ")},m.type&&"alert"===m.type?m.message.split(" ").map((e=>e.replaceAll(f,"You"))).join(" "):a.createElement(a.Fragment,null,a.createElement("span",null,m.sender.replaceAll(f,"You"),":"),a.createElement("span",null," ",m.message," "))))}),a.createElement("div",{className:E.chatMisc},a.createElement("span",{className:E.lastSent,style:{color:(0,K.hu)(i)?"#6495ed":"initial"}},k),a.createElement("span",{className:E.chatProps},n.value&&a.createElement(M.Z,null),(0,K.hu)(i)&&a.createElement("span",{className:E.unread}," ",i.length," ")))),a.createElement(W,{open:Z,anchorEl:x,onClose:j,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"}},a.createElement("div",null,a.createElement(s.Z,{onClick:()=>{(()=>{const t={value:!n.value,date:Date.now()};(0,ne.eb)({groupId:e,body:t}),v((0,_.eb)({_id:e,starredObj:t}))})(),j()}},n.value?a.createElement(M.Z,{style:{color:"#6495ed"}}):a.createElement(z.Z,{style:{color:"#6495ed"}}),a.createElement(l.Z,{component:"span"}," ",(n.value?"Unstar":"Star")+" group")),a.createElement(s.Z,{onClick:()=>{v((0,_.iY)(e)),j()}},a.createElement(N.Z,{style:{color:"#ff6a6a"}}),a.createElement(l.Z,{component:"span"}," Exit group ")))))};var le=n(4898),oe=n(2788);function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ce.apply(this,arguments)}const ie=(0,c.Z)({add:{fontSize:"2.9rem !important"},menu:{"& div":{top:"75px !important"},"& .MuiMenuItem-root":{paddingLeft:"10px"},"& svg":{marginRight:11,color:"#57565c",fontSize:"1.5rem"},"& .MuiListItemIcon-root":{minWidth:40}},speedDial:{alignItems:"flex-end",position:"sticky",bottom:"1rem",right:"1rem","& .MuiFab-primary":{background:"cornflowerblue",color:"#fff"},"& .MuiSpeedDialAction-staticTooltipLabel":{color:"#fff",background:"#739be3",whiteSpace:"nowrap"},"& .MuiSpeedDialAction-fab":{backgroundColor:"#739be3",color:"#fff"}}}),se=oe.ZP.div`
	display: flex;
	flex-direction: column;
	padding: 30px 10px 0 10px;
	justify-content: center;
	align-items: center;

	em {
		margin: 23px 0;
		color: #702828;
	}

	img {
		width: 90%;
	}
`,me=({})=>a.createElement(Z.Z,{in:!0},a.createElement(se,null,a.createElement("em",null,"Your chat history is currently empty"),a.createElement("img",{src:le.Z,alt:"Quick chat"}))),ue=({className:e})=>{(0,r.v9)((e=>e.components.stack.recentChats));const t=(0,r.v9)((e=>e.recentChats.chatToBeCleared)),n=(0,r.v9)((e=>e.recentChats.groupToBeDeleted)),c=(0,r.v9)((e=>e.recentChats.input)),{id:I,username:M}=(0,r.v9)((e=>e.account.account)),{useEffect:N,useState:z}=a,T=ie(),O=(0,r.I0)(),[D,L]=z(null),j=Boolean(D),P=()=>{L(null)},A=(0,r.v9)((e=>e.other.currentSelectedUser)),R=(0,r.v9)((e=>e.groups.selectedGroup)),W=(0,r.v9)((e=>e.recentChats.recentChats)),B=(0,r.v9)((e=>e.recentChats.showRecentUsersLoader)),G=(0,r.v9)((e=>e.other.fetched)),F=(0,r.v9)((e=>e.socketActivity.onlineUsers)),q=(0,r.v9)((e=>e.groups.fetchedGroups)),[Q,ee]=z(!1),[te,ae]=z(!1),le=e=>{O((0,U.T6)(e))},oe=()=>{(0,K.hu)(t)&&O((0,_.Wk)({})),(0,K.hu)(n)&&O((0,_.iY)({}))},se=()=>{ee(!Q)};return a.createElement("section",{className:[T.recentChats,e].join(" "),onMouseEnter:()=>ae(!0),onMouseLeave:()=>ae(!1)},a.createElement(k.Z,{styles:{}},a.createElement(s.Z,{onClick:()=>{P(),le({parent:"stack",component:"settings"})}},a.createElement(b.Z,{style:{color:"#6680af"}})),a.createElement(w.Z,{input:c,placeholder:"Search for users and groups",onChange:e=>{var t;t=e,O((0,_.gI)(t))}}),a.createElement(s.Z,{onClick:e=>{L(e.target)},style:{background:j&&"#0000000a"}},a.createElement(C.Z,null)),a.createElement(o.Z,{open:j,anchorOrigin:{horizontal:"right",vertical:"top"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:P,anchorEl:D,className:T.menu},a.createElement(i.Z,{onClick:()=>{P(),le({parent:"stack",component:"activeUsers"})}},a.createElement(y.Z,null),a.createElement(l.Z,{variant:"inherit"}," Network ")))),0===W.length?a.createElement(me,null):a.createElement("div",{className:T.userslist},B?a.createElement(S.Z,null):W.length>0&&W.map(((e,r)=>{if(e.chatType&&"group"===e.chatType){const t=()=>!!q.some((t=>t===e._id)),l=()=>R._id===e._id||!(!(0,K.hu)(n)||n._id!==e._id);return a.createElement(re,ce({},e,{key:r,userIsSelected:!!(0,K.hu)(A),isFetched:t(),isCurrentSelectedGroup:l()}))}{let n=()=>!(!(0,K.hu)(A)||A.username!==e.username)||!(!(0,K.hu)(t)||t.username!==e.username),l=()=>!!G.some((t=>t.username===e.username)),o=()=>{let t=F.find((t=>t.username===e.username));return!(void 0===t||!t.online)};return a.createElement(X,ce({},e,{key:r,groupIsSelected:!!(0,K.hu)(R),isOnline:o(),isFetched:l(),isCurrentSelectedUser:n()}))}}))),(0,K.hu)(t)&&a.createElement(m.Z,{open:(0,K.hu)(t),onClose:oe,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},a.createElement(h.Z,{id:"alert-dialog-title"},"Clear conversation"),a.createElement(d.Z,null,a.createElement(p.Z,{id:"alert-dialog-description"},`This action will permanently clear your entire chat history with ${t.username}. Continue?`)),a.createElement(u.Z,null,a.createElement(g.Z,{onClick:oe,style:{color:"red"}},"Cancel"),a.createElement(g.Z,{color:"primary",autoFocus:!0,onClick:()=>{(0,K.hu)(G.find((e=>e===t.username)))&&O((0,Y.EG)(t.username)),A.username===t.username&&O((0,Y.r0)({})),(0,J.Pq)({username:t.username}),O((0,_.c6)(t.username)),O((0,V.VB)(t.username)),oe()}},"Delete"))),(0,K.hu)(n)&&a.createElement(m.Z,{open:(0,K.hu)(n),onClose:oe,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},a.createElement(h.Z,{id:"alert-dialog-title"},"Exit group"),a.createElement(d.Z,null,a.createElement(p.Z,{id:"alert-dialog-description"},"This action will permanently clear your entire chat history with the \n seleceted group and you'll no longer be a member of the group. Continue?")),a.createElement(u.Z,null,a.createElement(g.Z,{onClick:oe,style:{color:"red"}},"Cancel"),a.createElement(g.Z,{color:"primary",autoFocus:!0,onClick:()=>{(0,$.Z)("removeGroupUser",{_id:n,username:M,message:{type:"alert",chatId:(new Date).getTime(),message:`${M} left the group`,timestamp:(0,K.hi)()}}),(0,ne.Ln)({groupId:n}),O((0,_.pK)(n)),O((0,H.iE)(n)),oe()}},"Delete"))),a.createElement(Z.Z,{in:te||navigator.maxTouchPoints>0},a.createElement(f.Z,{ariaLabel:"SpeedDial openIcon",className:T.speedDial,icon:a.createElement(E.Z,{openIcon:a.createElement(x.Z,null)}),onClose:se,onOpen:se,open:Q},a.createElement(v.Z,{icon:a.createElement(x.Z,null),tooltipTitle:"Create new group",tooltipOpen:!0,onClick:()=>{se(),O((0,U.T6)({parent:"stack",component:"newGroup"}))}}))))}},3268:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(8489);function r(e,...t){var n,r;n=e,r=t,a.W.emit(n,...r)}}}]);